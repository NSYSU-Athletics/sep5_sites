"use strict";(self["webpackChunkregistration"]=self["webpackChunkregistration"]||[]).push([[737],{9367:function(e,t,l){l.d(t,{Z:function(){return c}});var a=l(3396),d=l(9242);const i={class:"fixed z-10 left-0 top-0 w-full h-full overflow-scroll bg-black bg-opacity-40"},n={class:"box-border w-inherit sm:w-sm bg-white relative mx-auto w-11/12 sm:w-3/4 md:w-2/3 lg:w-1/2 my-12 p-5 sm:px-10 sm:py-5 rounded",style:{"min-height":"100px"}},s={class:"flex items-center"},o={class:"flex-grow"};function u(e,t,l,u,r,_){return(0,a.wg)(),(0,a.j4)(d.uT,{name:"modal"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("div",s,[(0,a._)("div",o,[(0,a.WI)(e.$slots,"title")]),(0,a._)("div",{class:"text-4xl text-gray-300 hover:text-gray-500 cursor-pointer duration-300 font-light",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t))},"×")]),(0,a.WI)(e.$slots,"content")])])])),_:3})}var r=(0,a.aZ)({setup(e,t){function l(){t.emit("close_modal")}return{closeModal:l}}}),_=l(89);const g=(0,_.Z)(r,[["render",u]]);var c=g},5737:function(e,t,l){l.r(t),l.d(t,{default:function(){return Zl}});var a=l(3396),d=l(7139),i=l(9242);const n=e=>((0,a.dD)("data-v-2892e118"),e=e(),(0,a.Cn)(),e),s={class:"mx-auto w-full p-5 sm:w-11/12 md:w-4/5 lg:w-2/3 xl:w-1/2"},o={class:"box-section"},u=(0,a.Uk)("回上頁"),r=(0,a.Uk)("Back"),_={class:"box-section"},g={class:"title"},c=(0,a.Uk)("本單位選手列表"),k=(0,a.Uk)("Local Athletes"),p=n((()=>(0,a._)("hr",null,null,-1))),w={class:"athlete-list"},h={class:"w-[20%]"},y=(0,a.Uk)("身分證字號"),m=(0,a.Uk)("ARC/Unified ID"),b={key:0,class:"w-[20%]"},D=(0,a.Uk)("學校/團體"),U=(0,a.Uk)("Organization"),v={key:1,class:"w-[20%]"},f=(0,a.Uk)("系所"),q=(0,a.Uk)("Department"),H={class:"w-[15%]"},Y=(0,a.Uk)("姓名"),x=(0,a.Uk)("Name"),L={class:"w-[10%]"},A=(0,a.Uk)("性別"),V=(0,a.Uk)("Sex"),O={class:"w-[15%]"},C=(0,a.Uk)("新增"),z=(0,a.Uk)("Add"),M={key:0},E={key:0,class:"w-[20%] truncate max-w-0"},$={key:1,class:"w-[20%] truncate max-w-0"},G={class:"w-[15%] truncate max-w-0"},S={key:0},I=(0,a.Uk)("男"),W=(0,a.Uk)("Men"),j={key:1},Z=(0,a.Uk)("女"),N=(0,a.Uk)("Women"),R=["onClick"],T=(0,a.Uk)("顯示"),P=(0,a.Uk)("More"),J={key:0,class:"box-section"},F={class:"title"},B=(0,a.Uk)("跨單位選手列表"),K=(0,a.Uk)("Interorganizational Athletes"),Q=n((()=>(0,a._)("hr",null,null,-1))),X={class:"athlete-list"},ee={class:"w-[20%]"},te=(0,a.Uk)("身分證字號"),le=(0,a.Uk)("ARC/Unified ID"),ae={key:0,class:"w-[20%]"},de=(0,a.Uk)("學校/團體"),ie=(0,a.Uk)("Organization"),ne={key:1,class:"w-[20%]"},se=(0,a.Uk)("系所"),oe=(0,a.Uk)("Department"),ue={class:"w-[15%]"},re=(0,a.Uk)("姓名"),_e=(0,a.Uk)("Name"),ge={class:"w-[10%]"},ce=(0,a.Uk)("性別"),ke=(0,a.Uk)("Sex"),pe=n((()=>(0,a._)("th",{class:"w-[15%]"},null,-1))),we={class:"w-[20%] truncate max-w-0"},he={class:"w-[20%] truncate max-w-0"},ye={class:"w-[15%] truncate max-w-0"},me={key:0},be=(0,a.Uk)("男"),De=(0,a.Uk)("Men"),Ue={key:1},ve=(0,a.Uk)("女"),fe=(0,a.Uk)("Women"),qe=["onClick"],He=(0,a.Uk)("顯示"),Ye=(0,a.Uk)("More"),xe={class:"text-2xl"},Le={key:0},Ae={key:1},Ve=n((()=>(0,a._)("hr",{class:"my-2"},null,-1)));function Oe(e,t,l,n,Oe,Ce){const ze=(0,a.up)("AddAthlete"),Me=(0,a.up)("EditAthlete"),Ee=(0,a.up)("SmallModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[(0,a._)("div",o,[(0,a._)("div",{class:"text-xl text-gray-400 cursor-pointer",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[u],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[r],64)):(0,a.kq)("",!0)])]),(0,a._)("div",_,[(0,a._)("div",g,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[c],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[k],64)):(0,a.kq)("",!0)]),p,(0,a._)("table",w,[(0,a._)("tr",null,[(0,a._)("th",h,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[y],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[m],64)):(0,a.kq)("",!0)]),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("th",b,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[D],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[U],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("th",v,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[f],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[q],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("th",H,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Y],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[x],64)):(0,a.kq)("",!0)]),(0,a._)("th",L,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[A],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[V],64)):(0,a.kq)("",!0)]),(0,a._)("th",O,[(0,a._)("button",{class:"button",onClick:t[1]||(t[1]=t=>e.displayModal=1)},["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[C],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[z],64)):(0,a.kq)("",!0)])])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.athleteList.home,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},["O0000"!=e.userData.org_id||"O0000"==e.userData.org_id&&t.add_by==e.userData.u_id?((0,a.wg)(),(0,a.iD)("tr",M,[(0,a._)("td",null,(0,d.zw)(t.unified_id),1),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("td",E,(0,d.zw)(t.org_ch),1)):(0,a.kq)("",!0),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("td",$,(0,d.zw)(t.dept_ch),1)):(0,a.kq)("",!0),(0,a._)("td",G,(0,d.zw)(t.name),1),(0,a._)("td",null,[1==t.sex?((0,a.wg)(),(0,a.iD)("span",S,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[I],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[W],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),2==t.sex?((0,a.wg)(),(0,a.iD)("span",j,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Z],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[N],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),(0,a._)("td",null,[(0,a._)("button",{class:"button",onClick:l=>e.editAthlete(t)},["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[T],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[P],64)):(0,a.kq)("",!0)],8,R)])])):(0,a.kq)("",!0)],64)))),128))])]),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("div",J,[(0,a._)("div",F,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[B],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[K],64)):(0,a.kq)("",!0)]),Q,(0,a._)("table",X,[(0,a._)("tr",null,[(0,a._)("th",ee,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[te],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[le],64)):(0,a.kq)("",!0)]),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("th",ae,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[de],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[ie],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),"O0000"!=e.userData.org_id?((0,a.wg)(),(0,a.iD)("th",ne,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[se],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[oe],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("th",ue,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[re],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[_e],64)):(0,a.kq)("",!0)]),(0,a._)("th",ge,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[ce],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[ke],64)):(0,a.kq)("",!0)]),pe]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.athleteList.other,((t,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",null,(0,d.zw)(t.unified_id),1),(0,a._)("td",we,(0,d.zw)(t[`org_${e.language}`]),1),(0,a._)("td",he,(0,d.zw)(t[`dept_${e.language}`]),1),(0,a._)("td",ye,(0,d.zw)(t.name),1),(0,a._)("td",null,[1==t.sex?((0,a.wg)(),(0,a.iD)("span",me,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[be],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[De],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0),2==t.sex?((0,a.wg)(),(0,a.iD)("span",Ue,["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[ve],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[fe],64)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),(0,a._)("td",null,[(0,a._)("button",{class:"button",onClick:l=>e.editAthlete(t,"lookup")},["ch"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[He],64)):(0,a.kq)("",!0),"en"==e.language?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[Ye],64)):(0,a.kq)("",!0)],8,qe)])])))),128))])])):(0,a.kq)("",!0)]),(0,a.wy)((0,a.Wm)(Ee,{onClose_modal:t[4]||(t[4]=t=>e.displayModal=0)},{title:(0,a.w5)((()=>[(0,a._)("div",xe,[1==e.displayModal?((0,a.wg)(),(0,a.iD)("div",Le,"新增選手")):(0,a.kq)("",!0),2==e.displayModal?((0,a.wg)(),(0,a.iD)("div",Ae,"選手資訊")):(0,a.kq)("",!0)])])),content:(0,a.w5)((()=>[Ve,1==e.displayModal?((0,a.wg)(),(0,a.j4)(ze,{key:0,onClose_modal:t[2]||(t[2]=t=>e.displayModal=0),onRefresh:e.getAthleteList},null,8,["onRefresh"])):(0,a.kq)("",!0),2==e.displayModal?((0,a.wg)(),(0,a.j4)(Me,{key:1,"edit-type":e.editType,onClose_modal:t[3]||(t[3]=t=>e.displayModal=0),onRefresh:e.getAthleteList,"athlete-data":e.selected},null,8,["edit-type","onRefresh","athlete-data"])):(0,a.kq)("",!0)])),_:1},512),[[i.F8,e.displayModal>0]])],64)}var Ce=l(4870),ze=l(9367),Me=l(3927);const Ee=e=>((0,a.dD)("data-v-dd9bb110"),e=e(),(0,a.Cn)(),e),$e={class:"athlete-table"},Ge=Ee((()=>(0,a._)("td",{class:"w-[20%]"},"身分證字號*",-1))),Se={class:"w-[80%]"},Ie={key:0,class:"warning"},We=Ee((()=>(0,a._)("td",null,"姓名*",-1))),je=Ee((()=>(0,a._)("td",null,"性別*",-1))),Ze=Ee((()=>(0,a._)("option",{value:"1"},"生理男",-1))),Ne=Ee((()=>(0,a._)("option",{value:"2"},"生理女",-1))),Re=[Ze,Ne],Te={key:0},Pe=Ee((()=>(0,a._)("td",null,[(0,a.Uk)("是否為大專"),(0,a._)("br"),(0,a.Uk)("院校學生*")],-1))),Je=["disabled"],Fe=Ee((()=>(0,a._)("span",null,"是",-1))),Be=["disabled"],Ke=Ee((()=>(0,a._)("span",null,"否",-1))),Qe=Ee((()=>(0,a._)("td",null,"學校*",-1))),Xe=(0,a.Uk)("找不到 "),et=(0,a.Uk)("。"),tt={key:1,class:"opacity-50"},lt=Ee((()=>(0,a._)("td",null,"系所",-1))),at={key:0},dt=(0,a.Uk)("找不到 "),it=(0,a.Uk)("。 "),nt={key:1,class:"opacity-50"},st={key:2,class:"opacity-50"},ot={key:0},ut=Ee((()=>(0,a._)("td",null,"團體*",-1))),rt=(0,a.Uk)("找不到 "),_t=(0,a.Uk)("。"),gt={key:1,class:"opacity-50"},ct={key:3},kt=Ee((()=>(0,a._)("td",null,"身份*",-1))),pt=Ee((()=>(0,a._)("option",{value:"0"},"隊員",-1))),wt=Ee((()=>(0,a._)("option",{value:"1"},"隊長",-1))),ht=[pt,wt],yt={key:4},mt=Ee((()=>(0,a._)("td",null,"學號",-1))),bt=Ee((()=>(0,a._)("td",null,"生日*",-1))),Dt=Ee((()=>(0,a._)("td",null,"手機",-1))),Ut={class:"text-right"};function vt(e,t,l,n,s,o){const u=(0,a.up)("v-select");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("table",$e,[(0,a._)("tr",null,[Ge,(0,a._)("td",Se,[(0,a.wy)((0,a._)("input",{type:"text",maxlength:"10","onUpdate:modelValue":t[0]||(t[0]=t=>e.data.unified_id=t),onBlur:t[1]||(t[1]=(...t)=>e.exist&&e.exist(...t))},null,544),[[i.nr,e.data.unified_id]]),e.data.unified_id.length>0&&!e.errorList.unified_id.unique?((0,a.wg)(),(0,a.iD)("div",Ie,"身分證字號已存在")):(0,a.kq)("",!0)])]),(0,a._)("tr",null,[We,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.data.name=t)},null,512),[[i.nr,e.data.name]])])]),(0,a._)("tr",null,[je,(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.data.sex=t)},Re,512),[[i.bM,e.data.sex]])])]),"O0000"!=e.data.org_id?((0,a.wg)(),(0,a.iD)("tr",Te,[Pe,(0,a._)("td",null,[(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio",value:"1",disabled:e.lockList.student,"onUpdate:modelValue":t[4]||(t[4]=t=>e.data.student=t),onChange:t[5]||(t[5]=t=>e.changeOrg(1))},null,40,Je),[[i.G2,e.data.student]]),Fe]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio",value:"0",disabled:e.lockList.student,"onUpdate:modelValue":t[6]||(t[6]=t=>e.data.student=t),onChange:t[7]||(t[7]=t=>e.changeOrg(0))},null,40,Be),[[i.G2,e.data.student]]),Ke])])])):(0,a.kq)("",!0),1==e.data.student?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("tr",null,[Qe,(0,a._)("td",null,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.org_id,clearable:!1,options:e.univList,reduce:e=>e.univ_id,modelValue:e.data.org_id,"onUpdate:modelValue":t[8]||(t[8]=t=>e.data.org_id=t),onInput:e.resetSelect},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Xe,(0,a._)("em",null,(0,d.zw)(e),1),et],64)):((0,a.wg)(),(0,a.iD)("div",tt,"請輸入或選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue","onInput"])])]),(0,a._)("tr",null,[lt,(0,a._)("td",null,[e.deptList.length>0?((0,a.wg)(),(0,a.iD)("div",at,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.dept_id,clearable:!1,options:e.deptList,reduce:e=>e.dept_id,modelValue:e.data.dept_id,"onUpdate:modelValue":t[9]||(t[9]=t=>e.data.dept_id=t),label:"label"},{"no-options":(0,a.w5)((({search:t,searching:l})=>[l?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[dt,(0,a._)("em",null,(0,d.zw)(t),1),it],64)):e.data.org_id.length>0?((0,a.wg)(),(0,a.iD)("div",nt,"載入中")):((0,a.wg)(),(0,a.iD)("div",st,"請選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,a.kq)("",!0)])])],64)):((0,a.wg)(),(0,a.iD)(a.HY,{key:2},["O0000"!=e.data.org_id?((0,a.wg)(),(0,a.iD)("tr",ot,[ut,(0,a._)("td",null,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.org_id,clearable:!1,options:e.orgList,reduce:e=>e.org_id,modelValue:e.data.org_id,"onUpdate:modelValue":t[10]||(t[10]=t=>e.data.org_id=t),label:"name_ch_full"},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[rt,(0,a._)("em",null,(0,d.zw)(e),1),_t],64)):((0,a.wg)(),(0,a.iD)("div",gt,"請輸入或選擇團體"))])),_:1},8,["disabled","options","reduce","modelValue"])])])):(0,a.kq)("",!0)],64)),"O0000"!=e.data.org_id?((0,a.wg)(),(0,a.iD)("tr",ct,[kt,(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[11]||(t[11]=t=>e.data.role=t)},ht,512),[[i.bM,e.data.role]])])])):(0,a.kq)("",!0),1==e.data.student?((0,a.wg)(),(0,a.iD)("tr",yt,[mt,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=t=>e.data.student_id=t)},null,512),[[i.nr,e.data.student_id]])])])):(0,a.kq)("",!0),(0,a._)("tr",null,[bt,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":t[13]||(t[13]=t=>e.data.birthday=t)},null,512),[[i.nr,e.data.birthday]])])]),(0,a._)("tr",null,[Dt,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=t=>e.data.phone=t)},null,512),[[i.nr,e.data.phone]])])])]),(0,a._)("div",Ut,[(0,a._)("button",{class:"button",onClick:t[15]||(t[15]=(...t)=>e.submitAll&&e.submitAll(...t))},"新增")])])}var ft=l(4226),qt=l.n(ft),Ht=(0,a.aZ)({setup(e,t){const l=new Me.L,d=new Me._,i=(0,Ce.qj)({unified_id:"",name:"",org_id:"",dept_id:"",sex:1,student:1,student_id:"",birthday:"",phone:"",role:0,avatar:"",remark:"{}"}),n=(0,Ce.qj)({org_id:!1,dept_id:!1,student:!1}),s=(0,Ce.iH)([]);function o(){l.Url("organization/list").GetAll(s)}o();const u=(0,Ce.iH)([]);l.Url("univ-list").GetAll(u).then((()=>{for(let e=0;e<u.value.length;e++)u.value[e].label=`${u.value[e].univ_name_ch_full} (${u.value[e].univ_name_en})`}));const r=(0,Ce.iH)([]);function _(){r.value=[],l.Url(`dept-list/${i.org_id}`).Get().then((e=>{let t={};for(let l=0;l<e.length;l++)t=e[l],t.label=`[${e[l].college_ch}] ${e[l].dept_ch}`,r.value.push(t)}))}function g(){l.Url("auth/user/info").Get().then((e=>{i.org_id=e.org_id,i.dept_id="U"===e.org_id.substr(0,1)?e.dept_id:"","U"===e.org_id.substr(0,1)&&_(),2===e.permission?(n.org_id=!0,n.student=!0,i.student="U"===e.org_id.substr(0,1)?1:0):1===e.permission?(n.org_id=!0,n.dept_id=!0,n.student=!0,i.student="U"===e.org_id.substr(0,1)?1:0):(n.org_id=!1,n.dept_id=!1,n.student=!1)}))}g();const c=(0,Ce.qj)({unified_id:{filled:!1,unique:!0},name:{filled:!1},org_id:{filled:!1},birthday:{filled:!1}});function k(){l.Url(`athlete/exist/${i.unified_id}`).Get().then((e=>{!0===e.message?c.unified_id.unique=!1:c.unified_id.unique=!0}))}function p(){for(const t of Object.entries(c))for(const e of Object.entries(t[1]))if(!1===e[1])return void("filled"===e[0]?d.Alert("請確認所有欄位皆已填寫"):d.Alert("請確認輸入的內容"));const e=JSON.parse(JSON.stringify(i));l.Url("athlete/add").Post(e).then((e=>{"done"===e.message&&(d.Alert("新增成功"),t.emit("refresh"),t.emit("close_modal"),i.unified_id="",i.name="",i.dept_id="",i.student_id="",i.birthday="",i.phone="")}))}return(0,a.YP)(i,(()=>{c.unified_id.filled=i.unified_id.length>0,c.name.filled=i.name.length>0,c.org_id.filled=i.org_id.length>0,c.birthday.filled=i.birthday.length>0})),{orgList:s,univList:u,deptList:r,data:i,errorList:c,lockList:n,submitAll:p,exist:k,resetSelect:()=>{i.dept_id=""},changeOrg:e=>{1===e&&"U"!==i.org_id.substring(0,1)&&(i.org_id=""),0===e&&"U"===i.org_id.substring(0,1)&&(i.org_id="")}}},components:{"v-select":qt()}}),Yt=l(89);const xt=(0,Yt.Z)(Ht,[["render",vt],["__scopeId","data-v-dd9bb110"]]);var Lt=xt;const At=e=>((0,a.dD)("data-v-0caa31a6"),e=e(),(0,a.Cn)(),e),Vt=At((()=>(0,a._)("div",{class:"text-gray-400"},"系所管理員僅可編輯本系選手",-1))),Ot={class:"athlete-table"},Ct=At((()=>(0,a._)("td",{class:"w-[20%]"},"身分證字號",-1))),zt={class:"w-[80%]"},Mt=At((()=>(0,a._)("td",null,"姓名*",-1))),Et=["readonly"],$t=At((()=>(0,a._)("td",null,"性別*",-1))),Gt=["disabled"],St=At((()=>(0,a._)("option",{value:"1"},"生理男",-1))),It=At((()=>(0,a._)("option",{value:"2"},"生理女",-1))),Wt=[St,It],jt=At((()=>(0,a._)("td",null,[(0,a.Uk)("是否為大專"),(0,a._)("br"),(0,a.Uk)("院校學生*")],-1))),Zt=["disabled"],Nt=At((()=>(0,a._)("span",null,"是",-1))),Rt=["disabled"],Tt=At((()=>(0,a._)("span",null,"否",-1))),Pt=At((()=>(0,a._)("td",null,"主要學校*",-1))),Jt=(0,a.Uk)("找不到 "),Ft=(0,a.Uk)("。"),Bt={key:1,class:"opacity-50"},Kt=At((()=>(0,a._)("td",null,"主要系所",-1))),Qt={key:0},Xt=(0,a.Uk)("找不到 "),el=(0,a.Uk)("。 "),tl={key:1,class:"opacity-50"},ll={key:2,class:"opacity-50"},al={key:1},dl=At((()=>(0,a._)("td",null,"主要團體*",-1))),il=(0,a.Uk)("找不到 "),nl=(0,a.Uk)("。"),sl={key:1,class:"opacity-50"},ol=At((()=>(0,a._)("td",null,"兼任學校",-1))),ul=(0,a.Uk)("找不到 "),rl=(0,a.Uk)("。"),_l={key:1,class:"opacity-50"},gl=At((()=>(0,a._)("td",null,"兼任系所",-1))),cl={key:0},kl=(0,a.Uk)("找不到 "),pl=(0,a.Uk)("。 "),wl={key:1,class:"opacity-50"},hl={key:2,class:"opacity-50"},yl={key:3},ml=At((()=>(0,a._)("td",null,"兼任團體",-1))),bl=(0,a.Uk)("找不到 "),Dl=(0,a.Uk)("。"),Ul={key:1,class:"opacity-50"},vl=At((()=>(0,a._)("td",null,"身份*",-1))),fl=["disabled"],ql=At((()=>(0,a._)("option",{value:"0"},"隊員",-1))),Hl=At((()=>(0,a._)("option",{value:"1"},"隊長",-1))),Yl=[ql,Hl],xl={key:4},Ll=At((()=>(0,a._)("td",null,"學號",-1))),Al=["readonly"],Vl=At((()=>(0,a._)("td",null,"生日*",-1))),Ol=["readonly"],Cl=At((()=>(0,a._)("td",null,"手機",-1))),zl=["readonly"],Ml={key:0,class:"text-right"};function El(e,t,l,n,s,o){const u=(0,a.up)("v-select");return(0,a.wg)(),(0,a.iD)("div",null,[Vt,(0,a._)("table",Ot,[(0,a._)("tr",null,[Ct,(0,a._)("td",zt,(0,d.zw)(e.data.unified_id),1)]),(0,a._)("tr",null,[Mt,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{readonly:!e.isEdit,type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.data.name=t)},null,8,Et),[[i.nr,e.data.name]])])]),(0,a._)("tr",null,[$t,(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{disabled:!e.isEdit,"onUpdate:modelValue":t[1]||(t[1]=t=>e.data.sex=t)},Wt,8,Gt),[[i.bM,e.data.sex]])])]),(0,a._)("tr",null,[jt,(0,a._)("td",null,[(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio",value:"1",disabled:e.lockList.student||!e.isEdit,"onUpdate:modelValue":t[2]||(t[2]=t=>e.data.student=t),onChange:t[3]||(t[3]=t=>e.changeOrg(1))},null,40,Zt),[[i.G2,e.data.student]]),Nt]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio",value:"0",disabled:e.lockList.student||!e.isEdit,"onUpdate:modelValue":t[4]||(t[4]=t=>e.data.student=t),onChange:t[5]||(t[5]=t=>e.changeOrg(0))},null,40,Rt),[[i.G2,e.data.student]]),Tt])])]),1==e.data.student?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("tr",null,[Pt,(0,a._)("td",null,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.org_id||!e.isEdit,clearable:!1,options:e.univList,reduce:e=>e.univ_id,modelValue:e.data.org_id,"onUpdate:modelValue":t[6]||(t[6]=t=>e.data.org_id=t),onInput:e.resetSelect},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Jt,(0,a._)("em",null,(0,d.zw)(e),1),Ft],64)):((0,a.wg)(),(0,a.iD)("div",Bt,"請輸入或選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue","onInput"])])]),(0,a._)("tr",null,[Kt,(0,a._)("td",null,[e.deptList.length>0?((0,a.wg)(),(0,a.iD)("div",Qt,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.dept_id||!e.isEdit,clearable:!1,options:e.deptList,reduce:e=>e.dept_id,modelValue:e.data.dept_id,"onUpdate:modelValue":t[7]||(t[7]=t=>e.data.dept_id=t),label:"label"},{"no-options":(0,a.w5)((({search:t,searching:l})=>[l?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[Xt,(0,a._)("em",null,(0,d.zw)(t),1),el],64)):e.data.org_id.length>0?((0,a.wg)(),(0,a.iD)("div",tl,"載入中")):((0,a.wg)(),(0,a.iD)("div",ll,"請選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,a.kq)("",!0)])])],64)):((0,a.wg)(),(0,a.iD)("tr",al,[dl,(0,a._)("td",null,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.org_id||!e.isEdit,clearable:!1,options:e.orgList,reduce:e=>e.org_id,modelValue:e.data.org_id,"onUpdate:modelValue":t[8]||(t[8]=t=>e.data.org_id=t),label:"name_ch_full"},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[il,(0,a._)("em",null,(0,d.zw)(e),1),nl],64)):((0,a.wg)(),(0,a.iD)("div",sl,"請輸入或選擇團體"))])),_:1},8,["disabled","options","reduce","modelValue"])])])),1==e.data.student?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("tr",null,[ol,(0,a._)("td",null,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.sec_org_id||!e.isEdit,clearable:!1,options:e.univList,reduce:e=>e.univ_id,modelValue:e.data.sec_org_id,"onUpdate:modelValue":t[9]||(t[9]=t=>e.data.sec_org_id=t),onInput:e.resetSelectSec},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[ul,(0,a._)("em",null,(0,d.zw)(e),1),rl],64)):((0,a.wg)(),(0,a.iD)("div",_l,"請輸入或選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue","onInput"])])]),(0,a._)("tr",null,[gl,(0,a._)("td",null,[e.deptList.length>0?((0,a.wg)(),(0,a.iD)("div",cl,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.sec_dept_id||!e.isEdit,clearable:!1,options:e.deptList,reduce:e=>e.dept_id,modelValue:e.data.sec_dept_id,"onUpdate:modelValue":t[10]||(t[10]=t=>e.data.sec_dept_id=t),label:"label"},{"no-options":(0,a.w5)((({search:t,searching:l})=>[l?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[kl,(0,a._)("em",null,(0,d.zw)(t),1),pl],64)):e.data.org_id.length>0?((0,a.wg)(),(0,a.iD)("div",wl,"載入中")):((0,a.wg)(),(0,a.iD)("div",hl,"請選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,a.kq)("",!0)])])],64)):((0,a.wg)(),(0,a.iD)("tr",yl,[ml,(0,a._)("td",null,[(0,a.Wm)(u,{class:"cursor-pointer",disabled:e.lockList.sec_org_id||!e.isEdit,clearable:!1,options:e.orgList,reduce:e=>e.org_id,modelValue:e.data.sec_org_id,"onUpdate:modelValue":t[11]||(t[11]=t=>e.data.sec_org_id=t),label:"name_ch_full"},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[bl,(0,a._)("em",null,(0,d.zw)(e),1),Dl],64)):((0,a.wg)(),(0,a.iD)("div",Ul,"請輸入或選擇團體"))])),_:1},8,["disabled","options","reduce","modelValue"])])])),(0,a._)("tr",null,[vl,(0,a._)("td",null,[(0,a.wy)((0,a._)("select",{disabled:!e.isEdit,"onUpdate:modelValue":t[12]||(t[12]=t=>e.data.role=t)},Yl,8,fl),[[i.bM,e.data.role]])])]),1==e.data.student?((0,a.wg)(),(0,a.iD)("tr",xl,[Ll,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text",readonly:!e.isEdit,"onUpdate:modelValue":t[13]||(t[13]=t=>e.data.student_id=t)},null,8,Al),[[i.nr,e.data.student_id]])])])):(0,a.kq)("",!0),(0,a._)("tr",null,[Vl,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"date",readonly:!e.isEdit,"onUpdate:modelValue":t[14]||(t[14]=t=>e.data.birthday=t)},null,8,Ol),[[i.nr,e.data.birthday]])])]),(0,a._)("tr",null,[Cl,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text",readonly:!e.isEdit,"onUpdate:modelValue":t[15]||(t[15]=t=>e.data.phone=t)},null,8,zl),[[i.nr,e.data.phone]])])])]),"lookup"!=e.editType?((0,a.wg)(),(0,a.iD)("div",Ml,[e.isEdit?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"button button-red",onClick:t[16]||(t[16]=(...t)=>e.deleteAll&&e.deleteAll(...t))},"刪除")):(0,a.kq)("",!0),e.isEdit?((0,a.wg)(),(0,a.iD)("button",{key:1,class:"button",onClick:t[17]||(t[17]=(...t)=>e.submitAll&&e.submitAll(...t))},"儲存")):((0,a.wg)(),(0,a.iD)("button",{key:2,class:"button",onClick:t[18]||(t[18]=t=>e.isEdit=!0)},"編輯"))])):(0,a.kq)("",!0)])}var $l=l(65),Gl=(0,a.aZ)({props:["athleteData","editType"],setup(e,t){const l=new Me.L,d=new Me._,i=(0,$l.oR)(),n=(0,Ce.iH)(!1),s=(0,Ce.iH)(e.editType),o=(0,Ce.qj)({unified_id:e.athleteData.unified_id,name:e.athleteData.name,org_id:e.athleteData.org_id,sec_org_id:e.athleteData.sec_org_id,dept_id:e.athleteData.dept_id,sec_dept_id:e.athleteData.sec_dept_id,sex:Number(e.athleteData.sex),student:Number(e.athleteData.student),student_id:e.athleteData.student_id,birthday:e.athleteData.birthday,phone:e.athleteData.phone,role:Number(e.athleteData.role),avatar:e.athleteData.avatar,remark:e.athleteData.remark}),u=(0,Ce.qj)({org_id:!1,sec_org_id:!1,dept_id:!1,sec_dept_id:!1,student:!1}),r=(0,Ce.iH)([]);function _(){l.Url("organization/list").GetAll(r)}_();const g=(0,Ce.iH)([]);l.Url("univ-list").GetAll(g).then((()=>{for(let e=0;e<g.value.length;e++)g.value[e].label=`${g.value[e].univ_name_ch_full} (${g.value[e].univ_name_en})`}));const c=(0,Ce.iH)([]);function k(){c.value=[],l.Url(`dept-list/${o.org_id}`).Get().then((e=>{let t={};for(let l=0;l<e.length;l++)t=e[l],t.label=`[${e[l].college_ch}] ${e[l].dept_ch}`,c.value.push(t)}))}function p(){l.Url("auth/user/info").Get().then((e=>{"U"===e.org_id.substr(0,1)&&k(),2===e.permission?(u.org_id=!0,u.student=!0,o.student="U"===e.org_id.substr(0,1)?1:0):1===e.permission?(u.org_id=!0,u.sec_org_id=!0,u.dept_id=!0,u.student=!0,o.student="U"===e.org_id.substr(0,1)?1:0,o.sec_org_id=o.org_id):(u.org_id=!1,u.sec_org_id=!1,u.dept_id=!1,u.sec_dept_id=!1,u.student=!1)}))}p();const w=(0,Ce.qj)({name:{filled:!1},org_id:{filled:!1},birthday:{filled:!1}});function h(){w.name.filled=o.name.length>0,w.org_id.filled=o.org_id.length>0,w.birthday.filled=o.birthday.length>0}function y(){for(const e of Object.entries(w))for(const t of Object.entries(e[1]))if(!1===t[1])return void("filled"===t[0]?d.Alert("請確認所有欄位皆已填寫"):d.Alert("請確認輸入的內容"));if(o.org_id===o.sec_org_id&&o.dept_id===o.sec_dept_id)return void d.Alert("兼任校系不得與主要校系相同");if(o.org_id===o.sec_org_id&&0===o.sec_dept_id.length)return void d.Alert("兼任學校/團體不得與主要學校/團體相同");const a=JSON.parse(JSON.stringify(o));l.Url("athlete/edit").Patch(e.athleteData.athlete_id,a).then((e=>{"done"===e.message&&(d.Alert("編輯成功"),t.emit("refresh"),t.emit("close_modal"),o.unified_id="",o.name="",o.dept_id="",o.student_id="",o.birthday="",o.phone="")}))}function m(){d.Confirm("確定要刪除嗎？")}h(),(0,a.YP)(o,(()=>{h()}));const b=(0,a.Fl)((()=>i.state.confirmAnswer));return(0,a.YP)(b,(a=>{"y"===a&&l.Url("athlete/delete").Delete(e.athleteData.athlete_id).then((e=>{"done"===e.message&&(d.Alert("已刪除選手"),t.emit("close_modal"),t.emit("refresh"))})),"n"===a&&d.Alert("取消刪除"),d.ResetConfirm()})),{orgList:r,univList:g,deptList:c,data:o,errorList:w,lockList:u,submitAll:y,deleteAll:m,resetSelect:()=>{o.dept_id=""},resetSelectSec:()=>{o.sec_dept_id=""},changeOrg:e=>{1===e&&"U"!==o.org_id.substring(0,1)&&(o.org_id=""),0===e&&"U"===o.org_id.substring(0,1)&&(o.org_id="")},isEdit:n,displayType:s}},components:{"v-select":qt()}});const Sl=(0,Yt.Z)(Gl,[["render",El],["__scopeId","data-v-0caa31a6"]]);var Il=Sl,Wl=(0,a.aZ)({setup(){const e=new Me.L,t=(0,Ce.iH)(0),l=(0,Ce.iH)({}),d=(0,Ce.iH)({}),i=(0,Ce.iH)({}),n=(0,Ce.iH)(void 0),s=(0,Ce.iH)([]);function o(){2===i.value.permission?e.Url(`athlete/get/org/${i.value.org_id}/second`).GetAll(s):e.Url(`athlete/get/org/${i.value.org_id}/second/${i.value.dept_id}`).GetAll(s)}function u(){e.Url("auth/user/info").GetAll(i).then((()=>{o()}))}return u(),{displayModal:t,gameData:d,athleteList:s,getAthleteList:o,selected:l,userData:i,editAthlete:(e,a)=>{l.value=e,t.value=2,n.value=a},editType:n,language:(0,a.Fl)((()=>(0,$l.oR)().state.language))}},components:{SmallModal:ze.Z,AddAthlete:Lt,EditAthlete:Il}});const jl=(0,Yt.Z)(Wl,[["render",Oe],["__scopeId","data-v-2892e118"]]);var Zl=jl}}]);
//# sourceMappingURL=737.5c7c067f.js.map
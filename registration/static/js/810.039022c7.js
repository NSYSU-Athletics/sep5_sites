"use strict";(self["webpackChunkregistration"]=self["webpackChunkregistration"]||[]).push([[810],{2810:function(e,l,t){t.r(l),t.d(l,{default:function(){return je}});var i=t(3396),a=t(9242),n=t(7139);const d=e=>((0,i.dD)("data-v-35837bd0"),e=e(),(0,i.Cn)(),e),s={class:"mx-auto w-full p-5 sm:w-11/12 md:w-4/5 lg:w-2/3"},o={class:"box-section"},u=(0,i.Uk)("回上頁"),g=(0,i.Uk)("Back"),r={class:"box-section"},k={class:"title"},_=(0,i.Uk)("新增報名"),c=(0,i.Uk)("Individual Events"),v=d((()=>(0,i._)("hr",null,null,-1))),p={class:"athlete-table"},h={key:0},w=(0,i.Uk)("是否為大專"),y=d((()=>(0,i._)("br",null,null,-1))),m=(0,i.Uk)("院校學生"),U=(0,i.Uk)("University"),D=d((()=>(0,i._)("br",null,null,-1))),H=(0,i.Uk)("Student"),b={colspan:"3"},Y=["disabled"],q=(0,i.Uk)("是"),f=(0,i.Uk)("Yes"),$=["disabled"],L=(0,i.Uk)("否"),A=(0,i.Uk)("No"),V={key:1},x=(0,i.Uk)("所屬單位"),z=(0,i.Uk)("Organization"),G={colspan:"3"},I={key:0},P=(0,i.Uk)("學校"),C=(0,i.Uk)("University"),N=(0,i.Uk)("找不到 "),O=(0,i.Uk)(" Not found"),S={key:1,class:"opacity-50"},j=(0,i.Uk)("系所"),E=(0,i.Uk)("Depratment"),R={key:0},W=(0,i.Uk)("找不到 "),K=(0,i.Uk)(" Not found "),F={key:1,class:"opacity-50"},J={key:2,class:"opacity-50"},M={key:1},Z=(0,i.Uk)("團體"),B=(0,i.Uk)("Organization Name"),Q=(0,i.Uk)("找不到 "),T=(0,i.Uk)(" Not found"),X={key:1,class:"opacity-50"},ee=(0,i.Uk)("選手"),le=(0,i.Uk)("Athlete"),te={colspan:"3"},ie=(0,i.Uk)("找不到 "),ae=(0,i.Uk)(" Not found"),ne={key:1,class:"opacity-50"},de=(0,i.Uk)("報名組別"),se=(0,i.Uk)("Division"),oe=["value"],ue=(0,i.Uk)("報名項目"),ge=(0,i.Uk)("Event"),re=["value"],ke={class:"text-right"},_e=(0,i.Uk)("新增"),ce=(0,i.Uk)("Add"),ve={class:"box-section"},pe={class:"title"},he=(0,i.Uk)("報名項目"),we=(0,i.Uk)("Registered"),ye=d((()=>(0,i._)("hr",null,null,-1))),me={class:"register-table"},Ue=(0,i.Uk)("姓名"),De=(0,i.Uk)("Name"),He=(0,i.Uk)("組別"),be=(0,i.Uk)("Division"),Ye=(0,i.Uk)("項目"),qe=(0,i.Uk)("Event"),fe=d((()=>(0,i._)("th",null,null,-1))),$e=["onClick"],Le=(0,i.Uk)("刪除"),Ae=(0,i.Uk)("Delete");function Ve(e,l,t,d,Ve,xe){const ze=(0,i.up)("v-select");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",o,[(0,i._)("div",{class:"text-xl text-gray-400 cursor-pointer",onClick:l[0]||(l[0]=l=>e.$router.go(-1))},["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[u],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[g],64)):(0,i.kq)("",!0)])]),(0,i._)("div",r,[(0,i._)("div",k,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[_],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[c],64)):(0,i.kq)("",!0)]),v,(0,i._)("table",p,["O0000"!=e.userData.org_id?((0,i.wg)(),(0,i.iD)("tr",h,[(0,i._)("td",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[w,y,m],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[U,D,H],64)):(0,i.kq)("",!0)]),(0,i._)("td",b,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"radio",value:"1",disabled:e.lockList.student,"onUpdate:modelValue":l[1]||(l[1]=l=>e.student=l)},null,8,Y),[[a.G2,e.student]]),(0,i._)("span",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[q],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[f],64)):(0,i.kq)("",!0)])]),(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"radio",value:"0",disabled:e.lockList.student,"onUpdate:modelValue":l[2]||(l[2]=l=>e.student=l)},null,8,$),[[a.G2,e.student]]),(0,i._)("span",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[L],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[A],64)):(0,i.kq)("",!0)])])])])):(0,i.kq)("",!0),"O0000"!=e.userData.org_id?((0,i.wg)(),(0,i.iD)("tr",V,[(0,i._)("td",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[x],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[z],64)):(0,i.kq)("",!0)]),(0,i._)("td",G,[1==e.student?((0,i.wg)(),(0,i.iD)("div",I,[(0,i._)("div",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[P],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[C],64)):(0,i.kq)("",!0)]),(0,i.Wm)(ze,{class:"cursor-pointer",disabled:e.lockList.org_id,clearable:!1,options:e.univList,reduce:e=>e.univ_id,modelValue:e.orgId,"onUpdate:modelValue":l[3]||(l[3]=l=>e.orgId=l),onInput:e.resetSelect},{"no-options":(0,i.w5)((({search:e,searching:l})=>[l?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[N,(0,i._)("em",null,(0,n.zw)(e),1),O],64)):((0,i.wg)(),(0,i.iD)("div",S,"請輸入或選擇學校 Please select your university."))])),_:1},8,["disabled","options","reduce","modelValue","onInput"]),(0,i._)("div",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[j],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[E],64)):(0,i.kq)("",!0)]),e.deptList.length>0?((0,i.wg)(),(0,i.iD)("div",R,[(0,i.Wm)(ze,{class:"cursor-pointer",disabled:e.lockList.dept_id,clearable:!1,options:e.deptList,reduce:e=>e.dept_id,modelValue:e.deptId,"onUpdate:modelValue":l[4]||(l[4]=l=>e.deptId=l),label:"label"},{"no-options":(0,i.w5)((({search:l,searching:t})=>[t?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[W,(0,i._)("em",null,(0,n.zw)(l),1),K],64)):e.orgId.length>0?((0,i.wg)(),(0,i.iD)("div",F,"載入中 Loading")):((0,i.wg)(),(0,i.iD)("div",J,"請選擇學校 Please select your university."))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),0==e.student?((0,i.wg)(),(0,i.iD)("div",M,[(0,i._)("div",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[Z],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[B],64)):(0,i.kq)("",!0)]),(0,i.Wm)(ze,{class:"cursor-pointer",disabled:e.lockList.org_id,clearable:!1,options:e.orgList,reduce:e=>e.org_id,modelValue:e.orgId,"onUpdate:modelValue":l[5]||(l[5]=l=>e.orgId=l),label:"name_ch_full"},{"no-options":(0,i.w5)((({search:e,searching:l})=>[l?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[Q,(0,i._)("em",null,(0,n.zw)(e),1),T],64)):((0,i.wg)(),(0,i.iD)("div",X,"請輸入或選擇團體 Please select your organization."))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("tr",null,[(0,i._)("td",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[ee],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[le],64)):(0,i.kq)("",!0)]),(0,i._)("td",te,[(0,i.Wm)(ze,{class:"cursor-pointer",clearable:!1,options:e.athleteList,reduce:e=>e.athlete_id,modelValue:e.data.athlete_id,"onUpdate:modelValue":l[6]||(l[6]=l=>e.data.athlete_id=l),label:"name"},{"no-options":(0,i.w5)((({search:e,searching:l})=>[l?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[ie,(0,i._)("em",null,(0,n.zw)(e),1),ae],64)):((0,i.wg)(),(0,i.iD)("div",ne,"請輸入或選擇選手 Please select an athlete."))])),_:1},8,["options","reduce","modelValue"])])]),(0,i._)("tr",null,[(0,i._)("td",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[de],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[se],64)):(0,i.kq)("",!0)]),(0,i._)("td",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":l[7]||(l[7]=l=>e.data.game_division_id=l)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.divisionList,((l,t)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[e.sex==l.sex||0==l.sex?((0,i.wg)(),(0,i.iD)("option",{key:0,value:l.game_division_id},(0,n.zw)(l[e.language]),9,oe)):(0,i.kq)("",!0)],64)))),128))],512),[[a.bM,e.data.game_division_id]])]),(0,i._)("td",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[ue],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[ge],64)):(0,i.kq)("",!0)]),(0,i._)("td",null,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":l[8]||(l[8]=l=>e.data.event_id=l)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.paramsList,((l,t)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:t},[0==l.multiple&&l.game_division_id==e.data.game_division_id?((0,i.wg)(),(0,i.iD)("option",{key:0,value:l.event_id},(0,n.zw)(l[`event_${e.language}`]),9,re)):(0,i.kq)("",!0)],64)))),128))],512),[[a.bM,e.data.event_id]])])])]),(0,i._)("div",ke,[(0,i._)("button",{class:"button",onClick:l[9]||(l[9]=(...l)=>e.submitAll&&e.submitAll(...l))},["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[_e],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[ce],64)):(0,i.kq)("",!0)])])]),(0,i._)("div",ve,[(0,i._)("div",pe,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[he],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[we],64)):(0,i.kq)("",!0)]),ye,(0,i._)("table",me,[(0,i._)("tr",null,[(0,i._)("th",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[Ue],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[De],64)):(0,i.kq)("",!0)]),(0,i._)("th",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[He],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[be],64)):(0,i.kq)("",!0)]),(0,i._)("th",null,["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[Ye],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[qe],64)):(0,i.kq)("",!0)]),fe]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.registerList,((l,t)=>((0,i.wg)(),(0,i.iD)("tr",{key:t},[(0,i._)("td",null,(0,n.zw)(l.name),1),(0,i._)("td",null,(0,n.zw)(l.ch),1),(0,i._)("td",null,(0,n.zw)(l.event_ch),1),(0,i._)("td",null,[(0,i._)("button",{class:"button button-red",onClick:t=>e.remove(l)},["ch"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[Le],64)):(0,i.kq)("",!0),"en"==e.language?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[Ae],64)):(0,i.kq)("",!0)],8,$e)])])))),128))])])])}var xe=t(4870),ze=t(3927),Ge=t(678),Ie=t(65),Pe=t(4226),Ce=t.n(Pe),Ne=(0,i.aZ)({setup(){const e=new ze.L,l=new ze._,t=(0,Ge.yj)(),a=(0,Ie.oR)(),n=(0,xe.qj)({athlete_id:"",game_division_id:0,event_id:""}),d=(0,xe.iH)(1),s=(0,xe.iH)(0),o=(0,xe.iH)(""),u=(0,xe.iH)(""),g=(0,xe.qj)({org_id:!1,dept_id:!1,student:!1}),r=(0,xe.iH)({}),k=(0,xe.iH)([]),_=(0,xe.iH)([]);function c(){e.Url(`games/${t.params.game_id}`).GetAll(r).then((()=>{const t=l.SportPrefix(r.value.type);e.Url(`${t}/event-params/${r.value.game_id}`).GetAll(k),e.Url(`${t}/game-division/${r.value.game_id}`).GetAll(_)}))}c();const v=(0,xe.iH)([]);function p(){e.Url("organization/list").GetAll(v)}p();const h=(0,xe.iH)([]);e.Url("univ-list").GetAll(h).then((()=>{for(let e=0;e<h.value.length;e++)h.value[e].label=`${h.value[e].univ_name_ch_full} (${h.value[e].univ_name_en})`}));const w=(0,xe.iH)([]);function y(){w.value=[],e.Url(`dept-list/${o.value}`).Get().then((e=>{let l={};for(let t=0;t<e.length;t++)l=e[t],l.label=`[${e[t].college_ch}] ${e[t].dept_ch}`,w.value.push(l)}))}const m=(0,xe.iH)({});function U(){e.Url("auth/user/info").Get().then((e=>{o.value=e.org_id,u.value="U"===e.org_id.substr(0,1)?e.dept_id:"",d.value="U"===e.org_id.substr(0,1)?1:0,"U"===e.org_id.substr(0,1)&&y(),2===e.permission?(g.org_id=!0,g.student=!0,d.value="U"===e.org_id.substr(0,1)?1:0):1===e.permission?(g.student=!0,g.org_id=!0,g.dept_id=!0,d.value="U"===e.org_id.substr(0,1)?1:0):(g.org_id=!1,g.dept_id=!1),m.value=e}))}U();const D=(0,xe.iH)([]);function H(){let l="";l=2===m.value.permission?`athlete/get/org/${m.value.org_id}/second`:`athlete/get/org/${m.value.org_id}/second/${m.value.dept_id}`,e.Url(l).Get().then((e=>{const l=e.home;l.concat(e.other),D.value=l.concat(JSON.parse(JSON.stringify(e.other)))}))}const b=(0,xe.iH)([]);function Y(){2===m.value.permission?e.Url(`register/ind/get/org/${r.value.type}/${r.value.game_id}/${m.value.org_id}`).GetAll(b):e.Url(`register/ind/get/dept/${r.value.type}/${r.value.game_id}/${m.value.dept_id}`).GetAll(b)}(0,i.YP)(m,(()=>{m.value.hasOwnProperty("org_id")&&(H(),Y())})),(0,i.YP)(o,((e,l)=>{e!==l&&(w.value=[],"U"===e.substring(0,1)&&y())}));const q=(0,xe.qj)({athlete_id:{filled:!1},game_division_id:{filled:!1},event_id:{filled:!1}});function f(){for(const e of Object.entries(q))for(const t of Object.entries(e[1]))if(!1===t[1])return void("filled"===t[0]?l.Alert("請確認所有欄位皆已填寫 Please fill in all required fields."):l.Alert("請確認輸入的內容 Please check your input data."));e.Url(`register/ind/exist/${r.value.type}/${r.value.game_id}/${n.athlete_id}/${n.game_division_id}/${n.event_id}`).Get().then((t=>{!0===t.message?l.Alert("該選手已報名過此組別項目 Athlete has already been registered for this division and event."):e.Url(`register/ind/add/${r.value.type}/${r.value.game_id}`).Post(n).then((e=>{"done"===e.message&&(l.Alert("新增成功 Done"),n.athlete_id="",n.game_division_id=0,n.event_id="",Y())}))}))}(0,i.YP)(n,(()=>{D.value.forEach((e=>{e.athlete_id===n.athlete_id&&(s.value=e.sex)})),q.athlete_id.filled=String(n.athlete_id).length>0,q.game_division_id.filled=n.game_division_id>0,q.event_id.filled=n.event_id.length>0}));let $={};function L(e){l.Confirm("確定要刪除嗎？"),$=e}const A=(0,i.Fl)((()=>a.state.confirmAnswer));return(0,i.YP)(A,(t=>{"y"===t&&e.Url(`register/ind/delete/${r.value.type}/${r.value.game_id}`).Delete(`${$.athlete_id}/${$.game_division_id}/${$.event_id}`).then((e=>{"done"===e.message&&(l.Alert("已刪除該報名項目"),Y())})),"n"===t&&l.Alert("取消刪除"),l.ResetConfirm()})),{gameData:r,lockList:g,student:d,orgId:o,deptId:u,univList:h,deptList:w,orgList:v,divisionList:_,paramsList:k,data:n,athleteList:D,sex:s,resetSelect:()=>{n.dept_id=""},submitAll:f,registerList:b,remove:L,errorList:q,userData:m,language:(0,i.Fl)((()=>(0,Ie.oR)().state.language))}},components:{"v-select":Ce()}}),Oe=t(89);const Se=(0,Oe.Z)(Ne,[["render",Ve],["__scopeId","data-v-35837bd0"]]);var je=Se}}]);
//# sourceMappingURL=810.039022c7.js.map
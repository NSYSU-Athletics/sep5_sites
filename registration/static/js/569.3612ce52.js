"use strict";(self["webpackChunkregistration"]=self["webpackChunkregistration"]||[]).push([[569],{9367:function(e,t,l){l.d(t,{Z:function(){return m}});var a=l(3396),s=l(9242);const i={class:"fixed z-10 left-0 top-0 w-full h-full overflow-scroll bg-black bg-opacity-40"},n={class:"box-border w-inherit sm:w-sm bg-white relative mx-auto w-11/12 sm:w-3/4 md:w-2/3 lg:w-1/2 my-12 p-5 sm:px-10 sm:py-5 rounded",style:{"min-height":"100px"}},o={class:"flex items-center"},d={class:"flex-grow"};function r(e,t,l,r,u,c){return(0,a.wg)(),(0,a.j4)(s.uT,{name:"modal"},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("div",o,[(0,a._)("div",d,[(0,a.WI)(e.$slots,"title")]),(0,a._)("div",{class:"text-4xl text-gray-300 hover:text-gray-500 cursor-pointer duration-300 font-light",onClick:t[0]||(t[0]=(...t)=>e.closeModal&&e.closeModal(...t))},"×")]),(0,a.WI)(e.$slots,"content")])])])),_:3})}var u=(0,a.aZ)({setup(e,t){function l(){t.emit("close_modal")}return{closeModal:l}}}),c=l(89);const _=(0,c.Z)(u,[["render",r]]);var m=_},4569:function(e,t,l){l.r(t),l.d(t,{default:function(){return Te}});var a=l(3396),s=l(9242);const i=e=>((0,a.dD)("data-v-482e8693"),e=e(),(0,a.Cn)(),e),n={class:"mx-auto w-full p-5 sm:w-11/12 md:w-4/5 lg:w-2/3 xl:w-1/2"},o={class:"box-section"},d={class:"box-section"},r=i((()=>(0,a._)("div",{class:"title"},"功能選單",-1))),u=i((()=>(0,a._)("hr",null,null,-1))),c=i((()=>(0,a._)("span",null,"隊伍管理",-1))),_=[c],m=i((()=>(0,a._)("span",null,"隊伍報名",-1))),p=[m],g={class:"text-2xl"},v={key:0},w=i((()=>(0,a._)("hr",{class:"my-2"},null,-1)));function b(e,t,l,i,c,m){const b=(0,a.up)("TeamList"),h=(0,a.up)("SmallModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",n,[(0,a._)("div",o,[(0,a._)("div",{class:"text-xl text-gray-400 cursor-pointer",onClick:t[0]||(t[0]=t=>e.$router.go(-1))},"回上頁")]),(0,a._)("div",d,[r,u,(0,a._)("button",{class:"arrow-button bg-orange-400",onClick:t[1]||(t[1]=t=>e.displayModal=1)},_),(0,a._)("button",{class:"arrow-button bg-orange-400",onClick:t[2]||(t[2]=t=>e.$router.push(`/register/${e.$route.params.game_id}/group`))},p)])]),(0,a.wy)((0,a.Wm)(h,{onClose_modal:t[4]||(t[4]=t=>e.displayModal=0)},{title:(0,a.w5)((()=>[(0,a._)("div",g,[1==e.displayModal?((0,a.wg)(),(0,a.iD)("div",v,"隊伍管理")):(0,a.kq)("",!0)])])),content:(0,a.w5)((()=>[w,1==e.displayModal?((0,a.wg)(),(0,a.j4)(b,{key:0,onClose_modal:t[3]||(t[3]=t=>e.displayModal=0)})):(0,a.kq)("",!0)])),_:1},512),[[s.F8,e.displayModal>0]])],64)}var h=l(4870),y=l(9367),k=l(7139);const f=e=>((0,a.dD)("data-v-28daead4"),e=e(),(0,a.Cn)(),e),x={class:"new-team"},U=f((()=>(0,a._)("div",null,"隊伍名稱：",-1))),D=f((()=>(0,a._)("hr",null,null,-1))),$={class:"flex-grow"},H={class:"flex gap-3 items-center"},L=f((()=>(0,a._)("div",null,"成員：",-1))),M={key:0},A=["onClick"],C={class:"text-2xl"},I={key:0},G=f((()=>(0,a._)("hr",{class:"my-2"},null,-1)));function V(e,t,l,i,n,o){const d=(0,a.up)("AddMember"),r=(0,a.up)("SmallModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a._)("div",x,[U,(0,a.wy)((0,a._)("input",{type:"text",class:"flex-grow block","onUpdate:modelValue":t[0]||(t[0]=t=>e.data.team_name=t)},null,512),[[s.nr,e.data.team_name]]),(0,a._)("button",{class:"block button",onClick:t[1]||(t[1]=(...t)=>e.submitAll&&e.submitAll(...t))},"新增")]),D,(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.teamList,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{key:l,class:"flex p-1 items-center"},[(0,a._)("div",$,[(0,a._)("div",null,(0,k.zw)(t.team_name),1),(0,a._)("div",H,[L,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.member_data_list,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"border-2 rounded px-1 py-0.5"},(0,k.zw)(e.name),1)))),128)),0==t.member_list.length?((0,a.wg)(),(0,a.iD)("div",M,"目前還沒有成員")):(0,a.kq)("",!0)])]),(0,a._)("button",{class:"button block",onClick:l=>e.openTeam(t)},"編輯",8,A)])))),128))])]),(0,a.wy)((0,a.Wm)(r,{onClose_modal:t[3]||(t[3]=t=>e.displayModal=0)},{title:(0,a.w5)((()=>[(0,a._)("div",C,[1==e.displayModal?((0,a.wg)(),(0,a.iD)("div",I,"編輯成員")):(0,a.kq)("",!0)])])),content:(0,a.w5)((()=>[G,1==e.displayModal?((0,a.wg)(),(0,a.j4)(d,{key:0,"team-data":e.teamData,onClose_modal:t[2]||(t[2]=t=>e.displayModal=0),onRefresh:e.getTeamList},null,8,["team-data","onRefresh"])):(0,a.kq)("",!0)])),_:1},512),[[s.F8,e.displayModal>0]])],64)}var Y=l(3927),q=l(678),z=l(65);l(6699);const S=e=>((0,a.dD)("data-v-366f8621"),e=e(),(0,a.Cn)(),e),Z={class:"text-lg p-1"},P=S((()=>(0,a._)("hr",null,null,-1))),j=S((()=>(0,a._)("div",{class:"p-1 text-lg"},"新增成員",-1))),O={class:"athlete-table"},W=S((()=>(0,a._)("td",null,[(0,a.Uk)("是否為大專"),(0,a._)("br"),(0,a.Uk)("院校學生")],-1))),T={colspan:"3"},J=["disabled"],N=S((()=>(0,a._)("span",null,"是",-1))),K=["disabled"],R=S((()=>(0,a._)("span",null,"否",-1))),F=S((()=>(0,a._)("td",null,"所屬單位",-1))),B={colspan:"3"},E={key:0},Q=S((()=>(0,a._)("div",null,"學校",-1))),X=(0,a.Uk)("找不到 "),ee=(0,a.Uk)("。"),te={key:1,class:"opacity-50"},le=S((()=>(0,a._)("div",null,"系所",-1))),ae={key:0},se=(0,a.Uk)("找不到 "),ie=(0,a.Uk)("。 "),ne={key:1,class:"opacity-50"},oe={key:2,class:"opacity-50"},de={key:1},re=S((()=>(0,a._)("div",null,"團體",-1))),ue=(0,a.Uk)("找不到 "),ce=(0,a.Uk)("。"),_e={key:1,class:"opacity-50"},me=S((()=>(0,a._)("td",null,"選手",-1))),pe={colspan:"3"},ge=(0,a.Uk)("找不到 "),ve=(0,a.Uk)("。"),we={key:1,class:"opacity-50"},be={class:"my-1 text-right"},he=S((()=>(0,a._)("div",{class:"mx-1 my-2"},"成員名單：",-1))),ye=S((()=>(0,a._)("hr",null,null,-1))),ke={class:"athlete-table"},fe={key:0},xe={class:"w-[30%] truncate max-w-0"},Ue={class:"w-[30%] truncate max-w-0"},De={class:"w-[20%] truncate max-w-0"},$e={class:"w-[5%] truncate max-w-0"},He={key:0},Le={key:1},Me={class:"w-[15%] truncate max-w-0 text-right"},Ae=["onClick"],Ce={class:"my-1"};function Ie(e,t,l,i,n,o){const d=(0,a.up)("v-select");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",Z,"隊名："+(0,k.zw)(e.team.team_name),1),P,j,(0,a._)("table",O,[(0,a._)("tr",null,[W,(0,a._)("td",T,[(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio",value:"1",disabled:e.lockList.student,"onUpdate:modelValue":t[0]||(t[0]=t=>e.student=t)},null,8,J),[[s.G2,e.student]]),N]),(0,a._)("label",null,[(0,a.wy)((0,a._)("input",{type:"radio",value:"0",disabled:e.lockList.student,"onUpdate:modelValue":t[1]||(t[1]=t=>e.student=t)},null,8,K),[[s.G2,e.student]]),R])])]),(0,a._)("tr",null,[F,(0,a._)("td",B,[1==e.student?((0,a.wg)(),(0,a.iD)("div",E,[Q,(0,a.Wm)(d,{class:"cursor-pointer",disabled:e.lockList.org_id,clearable:!1,options:e.univList,reduce:e=>e.univ_id,modelValue:e.orgId,"onUpdate:modelValue":t[2]||(t[2]=t=>e.orgId=t),onInput:e.resetSelect},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[X,(0,a._)("em",null,(0,k.zw)(e),1),ee],64)):((0,a.wg)(),(0,a.iD)("div",te,"請輸入或選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue","onInput"]),le,e.deptList.length>0?((0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(d,{class:"cursor-pointer",disabled:e.lockList.dept_id,clearable:!1,options:e.deptList,reduce:e=>e.dept_id,modelValue:e.deptId,"onUpdate:modelValue":t[3]||(t[3]=t=>e.deptId=t),label:"label"},{"no-options":(0,a.w5)((({search:t,searching:l})=>[l?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[se,(0,a._)("em",null,(0,k.zw)(t),1),ie],64)):e.orgId.length>0?((0,a.wg)(),(0,a.iD)("div",ne,"載入中")):((0,a.wg)(),(0,a.iD)("div",oe,"請選擇學校"))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),0==e.student?((0,a.wg)(),(0,a.iD)("div",de,[re,(0,a.Wm)(d,{class:"cursor-pointer",disabled:e.lockList.org_id,clearable:!1,options:e.orgList,reduce:e=>e.org_id,modelValue:e.orgId,"onUpdate:modelValue":t[4]||(t[4]=t=>e.orgId=t),label:"name_ch_full"},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[ue,(0,a._)("em",null,(0,k.zw)(e),1),ce],64)):((0,a.wg)(),(0,a.iD)("div",_e,"請輸入或選擇團體"))])),_:1},8,["disabled","options","reduce","modelValue"])])):(0,a.kq)("",!0)])]),(0,a._)("tr",null,[me,(0,a._)("td",pe,[(0,a.Wm)(d,{class:"cursor-pointer",clearable:!1,options:e.athleteList,reduce:e=>e.athlete_id,modelValue:e.athleteId,"onUpdate:modelValue":t[5]||(t[5]=t=>e.athleteId=t),label:"name"},{"no-options":(0,a.w5)((({search:e,searching:t})=>[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[ge,(0,a._)("em",null,(0,k.zw)(e),1),ve],64)):((0,a.wg)(),(0,a.iD)("div",we,"請輸入或選擇選手"))])),_:1},8,["options","reduce","modelValue"])])])]),(0,a._)("div",be,[(0,a._)("button",{class:"button",onClick:t[6]||(t[6]=(...t)=>e.addMember&&e.addMember(...t))},"加入")]),he,ye,(0,a._)("table",ke,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.athleteList,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[e.data.includes(t.athlete_id)?((0,a.wg)(),(0,a.iD)("tr",fe,[(0,a._)("td",xe,(0,k.zw)(t.org_ch),1),(0,a._)("td",Ue,(0,k.zw)(t.dept_ch),1),(0,a._)("td",De,(0,k.zw)(t.name),1),(0,a._)("td",$e,[1==t.sex?((0,a.wg)(),(0,a.iD)("span",He,"男")):((0,a.wg)(),(0,a.iD)("span",Le,"女"))]),(0,a._)("td",Me,[(0,a._)("button",{class:"button button-red block",onClick:l=>e.data.splice(e.data.indexOf(t.athlete_id),1)},"刪除",8,Ae)])])):(0,a.kq)("",!0)],64)))),128))]),(0,a._)("div",Ce,[(0,a._)("button",{class:"button w-full",onClick:t[7]||(t[7]=(...t)=>e.submitAll&&e.submitAll(...t))},"儲存")])])}var Ge=l(4226),Ve=l.n(Ge),Ye=(0,a.aZ)({props:["teamData"],setup(e,t){const l=new Y.L,s=new Y._,i=(0,q.yj)(),n=(0,h.iH)(e.teamData),o=(0,h.qj)(JSON.parse(e.teamData.member_list)),d=(0,h.iH)(1),r=(0,h.iH)(0),u=(0,h.iH)(""),c=(0,h.iH)(""),_=(0,h.iH)(""),m=(0,h.qj)({org_id:!1,dept_id:!1,student:!1}),p=(0,h.iH)({}),g=(0,h.iH)([]),v=(0,h.iH)([]);function w(){l.Url(`games/${i.params.game_id}`).GetAll(p).then((()=>{const e=s.SportPrefix(p.value.type);l.Url(`${e}/event-params/${p.value.game_id}`).GetAll(g),l.Url(`${e}/game-division/${p.value.game_id}`).GetAll(v)}))}w();const b=(0,h.iH)([]);function y(){l.Url("organization/list").GetAll(b)}y();const k=(0,h.iH)([]);l.Url("univ-list").GetAll(k).then((()=>{for(let e=0;e<k.value.length;e++)k.value[e].label=`${k.value[e].univ_name_ch_full} (${k.value[e].univ_name_en})`}));const f=(0,h.iH)([]);function x(){f.value=[],l.Url(`dept-list/${u.value}`).Get().then((e=>{let t={};for(let l=0;l<e.length;l++)t=e[l],t.label=`[${e[l].college_ch}] ${e[l].dept_ch}`,f.value.push(t)}))}const U=(0,h.iH)({});function D(){l.Url("auth/user/info").Get().then((e=>{u.value=e.org_id,c.value="U"===e.org_id.substr(0,1)?e.dept_id:"",d.value="U"===e.org_id.substr(0,1)?1:0,"U"===e.org_id.substr(0,1)&&x(),2===e.permission?(m.org_id=!0,m.student=!0,d.value="U"===e.org_id.substr(0,1)?1:0):1===e.permission?(m.student=!0,m.org_id=!0,m.dept_id=!0,d.value="U"===e.org_id.substr(0,1)?1:0):(m.org_id=!1,m.dept_id=!1),U.value=e}))}D();const $=(0,h.iH)([]);function H(){let e="";e=2===U.value.permission?`athlete/get/org/${U.value.org_id}/second`:`athlete/get/org/${U.value.org_id}/second/${U.value.dept_id}`,l.Url(e).Get().then((e=>{const t=e.home;t.concat(e.other),$.value=t.concat(JSON.parse(JSON.stringify(e.other)))}))}function L(){l.Url(`register/grp/team/member/${p.value.type}/${p.value.game_id}`).Patch(n.value.team_id,{member_list:JSON.stringify(o)}).then((e=>{"done"===e.message&&(s.Alert("編輯成功"),t.emit("refresh"),t.emit("close_modal"))}))}return(0,a.YP)(U,(()=>{U.value.hasOwnProperty("org_id")&&H()})),(0,a.YP)(u,((e,t)=>{e!==t&&(f.value=[],"U"===e.substring(0,1)&&x())})),{gameData:p,lockList:m,student:d,orgId:u,deptId:c,athleteId:_,univList:k,deptList:f,orgList:b,divisionList:v,paramsList:g,data:o,athleteList:$,sex:r,team:n,resetSelect:()=>{o.dept_id=""},submitAll:L,addMember:()=>{""===_.value?s.Alert("請先選擇選手"):o.includes(_.value)?s.Alert("此選手已加入"):o.push(_.value)}}},components:{"v-select":Ve()}}),qe=l(89);const ze=(0,qe.Z)(Ye,[["render",Ie],["__scopeId","data-v-366f8621"]]);var Se=ze,Ze=(0,a.aZ)({setup(){const e=new Y.L,t=new Y._,l=(0,q.yj)(),s=((0,z.oR)(),(0,h.iH)(0)),i=(0,h.iH)({}),n=(0,h.qj)({team_name:""}),o=(0,h.iH)({}),d=(0,h.iH)({}),r=(0,h.iH)([]),u=(0,h.iH)([]);function c(){e.Url(`games/${l.params.game_id}`).GetAll(d).then((()=>{const l=t.SportPrefix(d.value.type);e.Url(`${l}/event-params/${d.value.game_id}`).GetAll(r),e.Url(`${l}/game-division/${d.value.game_id}`).GetAll(u)}))}c();const _=(0,h.iH)([]);function m(){let t="";t=2===i.value.permission?`register/grp/team/${d.value.type}/${d.value.game_id}/${i.value.org_id}`:`register/grp/team/${d.value.type}/${d.value.game_id}/${i.value.org_id}/${i.value.dept_id}`,e.Url(t).GetAll(_)}function p(){e.Url("auth/user/info").Get().then((e=>{n.org_id=e.org_id,n.dept_id="U"===e.org_id.substr(0,1)?e.dept_id:"",i.value=e}))}function g(){0!==n.team_name.length?e.Url(`register/grp/team/add/${d.value.type}/${d.value.game_id}`).Post(n).then((e=>{"done"===e.message&&(t.Alert("新增成功"),n.team_name="",m())})):t.Alert("請輸入隊名")}return p(),(0,a.YP)([d,i],(()=>{d.value.hasOwnProperty("game_id")&&i.value.hasOwnProperty("org_id")&&m()})),{data:n,submitAll:g,teamList:_,displayModal:s,openTeam:e=>{s.value=1,o.value=e},teamData:o,getTeamList:m}},components:{SmallModal:y.Z,AddMember:Se}});const Pe=(0,qe.Z)(Ze,[["render",V],["__scopeId","data-v-28daead4"]]);var je=Pe,Oe=(0,a.aZ)({setup(){const e=(0,h.iH)(0);return{displayModal:e}},components:{SmallModal:y.Z,TeamList:je}});const We=(0,qe.Z)(Oe,[["render",b],["__scopeId","data-v-482e8693"]]);var Te=We}}]);
//# sourceMappingURL=569.3612ce52.js.map
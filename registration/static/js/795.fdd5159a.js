"use strict";(self["webpackChunkregistration"]=self["webpackChunkregistration"]||[]).push([[795],{3795:function(e,i,t){t.r(i),t.d(i,{default:function(){return te}});var l=t(3396),a=t(7139),n=t(9242);const g=e=>((0,l.dD)("data-v-294e18ec"),e=e(),(0,l.Cn)(),e),d={class:"mx-auto w-full p-5 sm:w-11/12 md:w-4/5 lg:w-2/3 xl:w-1/2"},u={class:"box-section"},s=(0,l.Uk)("回上頁"),r=(0,l.Uk)("Back"),_={class:"box-section"},o=g((()=>(0,l._)("div",null,"要先去隊伍管理裡面新增隊伍，並選好選手後，這個選單才會有東西讓你選唷。",-1))),v=g((()=>(0,l._)("div",{class:"text-4xl"},"每個參賽選手的資料要去「選手資料管理」才能新增和編輯唷。",-1))),k={class:"title"},m=(0,l.Uk)("隊伍報名"),c=(0,l.Uk)("Group events"),w=g((()=>(0,l._)("hr",null,null,-1))),p={class:"athlete-table"},y=(0,l.Uk)("隊名"),h=(0,l.Uk)("Team Name"),D={colspan:"3"},f=["value"],U=(0,l.Uk)("報名組別"),H=(0,l.Uk)("Division"),$=["value"],Y=(0,l.Uk)("報名項目"),q=(0,l.Uk)("Event"),b=["value"],A={class:"text-right"},x=(0,l.Uk)("新增"),L=(0,l.Uk)("Add"),C={class:"box-section"},G={class:"title"},P=(0,l.Uk)("報名項目"),z=(0,l.Uk)("Registered"),j=g((()=>(0,l._)("hr",null,null,-1))),E={class:"register-table"},K=(0,l.Uk)("隊伍"),O=(0,l.Uk)("Team"),R=(0,l.Uk)("組別"),S=(0,l.Uk)("Division"),M=(0,l.Uk)("項目"),T=(0,l.Uk)("Event"),V=g((()=>(0,l._)("th",null,null,-1))),F=["onClick"],Z=(0,l.Uk)("刪除"),B=(0,l.Uk)("Delete");function I(e,i,t,g,I,N){return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",u,[(0,l._)("div",{class:"text-xl text-gray-400 cursor-pointer",onClick:i[0]||(i[0]=i=>e.$router.go(-1))},["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[s],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[r],64)):(0,l.kq)("",!0)])]),(0,l._)("div",_,[o,v,(0,l._)("div",k,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[m],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[c],64)):(0,l.kq)("",!0)]),w,(0,l._)("table",p,[(0,l._)("tr",null,[(0,l._)("td",null,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[y],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[h],64)):(0,l.kq)("",!0)]),(0,l._)("td",D,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":i[1]||(i[1]=i=>e.data.team_id=i)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.teamList,((e,i)=>((0,l.wg)(),(0,l.iD)("option",{key:i,value:e.team_id},(0,a.zw)(e.team_name),9,f)))),128))],512),[[n.bM,e.data.team_id]])])]),(0,l._)("tr",null,[(0,l._)("td",null,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[U],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[H],64)):(0,l.kq)("",!0)]),(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":i[2]||(i[2]=i=>e.data.game_division_id=i)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.divisionList,((i,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[e.groupSex(i.sex)||0==i.sex?((0,l.wg)(),(0,l.iD)("option",{key:0,value:i.game_division_id},(0,a.zw)(i.ch),9,$)):(0,l.kq)("",!0)],64)))),128))],512),[[n.bM,e.data.game_division_id]])]),(0,l._)("td",null,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[Y],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[q],64)):(0,l.kq)("",!0)]),(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":i[3]||(i[3]=i=>e.data.event_id=i)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.paramsList,((i,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[1==i.multiple&&i.game_division_id==e.data.game_division_id?((0,l.wg)(),(0,l.iD)("option",{key:0,value:i.event_id},(0,a.zw)(i[`event_${e.language}`]),9,b)):(0,l.kq)("",!0)],64)))),128))],512),[[n.bM,e.data.event_id]])])])]),(0,l._)("div",A,[(0,l._)("button",{class:"button",onClick:i[4]||(i[4]=(...i)=>e.submitAll&&e.submitAll(...i))},["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[x],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[L],64)):(0,l.kq)("",!0)])])]),(0,l._)("div",C,[(0,l._)("div",G,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[P],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[z],64)):(0,l.kq)("",!0)]),j,(0,l._)("table",E,[(0,l._)("tr",null,[(0,l._)("th",null,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[K],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[O],64)):(0,l.kq)("",!0)]),(0,l._)("th",null,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[R],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[S],64)):(0,l.kq)("",!0)]),(0,l._)("th",null,["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[M],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[T],64)):(0,l.kq)("",!0)]),V]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.registerList,((i,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t},[(0,l._)("td",null,(0,a.zw)(i.team_name),1),(0,l._)("td",null,(0,a.zw)(i.ch),1),(0,l._)("td",null,(0,a.zw)(i.event_ch),1),(0,l._)("td",null,[(0,l._)("button",{class:"button button-red",onClick:t=>e.remove(i)},["ch"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[Z],64)):(0,l.kq)("",!0),"en"==e.language?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[B],64)):(0,l.kq)("",!0)],8,F)])])))),128))])])])}var N=t(4870),J=t(3927),Q=t(678),W=t(65),X=(0,l.aZ)({setup(){const e=new J.L,i=new J._,t=(0,Q.yj)(),a=(0,W.oR)(),n=(0,N.iH)({}),g=(0,N.qj)({team_id:"",game_division_id:0,event_id:""}),d=(0,N.iH)({}),u=(0,N.iH)([]),s=(0,N.iH)([]);function r(){e.Url(`games/${t.params.game_id}`).GetAll(d).then((()=>{const t=i.SportPrefix(d.value.type);e.Url(`${t}/event-params/${d.value.game_id}`).GetAll(u),e.Url(`${t}/game-division/${d.value.game_id}`).GetAll(s)}))}r();const _=(0,N.iH)([]);function o(){let i="";i=2===n.value.permission?`register/grp/team/${d.value.type}/${d.value.game_id}/${n.value.org_id}`:`register/grp/team/${d.value.type}/${d.value.game_id}/${n.value.org_id}/${n.value.dept_id}`,e.Url(i).GetAll(_).then((()=>{g.team_id=_.value[0].team_id}))}function v(){e.Url("auth/user/info").GetAll(n)}v();const k=(0,N.iH)([]);function m(){2===n.value.permission?e.Url(`register/grp/get/org/${d.value.type}/${d.value.game_id}/${n.value.org_id}`).GetAll(k):e.Url(`register/grp/get/dept/${d.value.type}/${d.value.game_id}/${n.value.dept_id}`).GetAll(k)}(0,l.YP)([d,n],(()=>{d.value.hasOwnProperty("game_id")&&n.value.hasOwnProperty("org_id")&&(o(),m())}));const c=(0,N.qj)({team_id:{filled:!1},game_division_id:{filled:!1},event_id:{filled:!1}});function w(){for(const e of Object.entries(c))for(const t of Object.entries(e[1]))if(!1===t[1])return void("filled"===t[0]?i.Alert("不得送出空報名內容"):i.Alert("請確認輸入的內容"));if(1===d.value.only_team)for(let e=0;e<k.value.length;e++)if(k.value.game_division_id===g.game_division_id&&k.value.event_id===g.event_id)return void i.Alert("該組別項目一單位僅能報名一隊");e.Url(`register/grp/exist/${d.value.type}/${d.value.game_id}/${g.team_id}/${g.game_division_id}/${g.event_id}`).Get().then((t=>{!0===t.message?i.Alert("該隊伍已報名過此組別項目"):e.Url(`register/grp/add/${d.value.type}/${d.value.game_id}`).Post(g).then((e=>{"done"===e.message&&(i.Alert("新增成功"),g.game_division_id=0,g.event_id="",m())}))}))}(0,l.YP)(g,(()=>{c.team_id.filled=String(g.team_id).length>0,c.game_division_id.filled=g.game_division_id>0,c.event_id.filled=g.event_id.length>0}));let p={};function y(e){i.Confirm("確定要刪除嗎？"),p=e}const h=(0,l.Fl)((()=>a.state.confirmAnswer));return(0,l.YP)(h,(t=>{"y"===t&&e.Url(`register/grp/delete/${d.value.type}/${d.value.game_id}`).Delete(`${p.team_id}/${p.game_division_id}/${p.event_id}`).then((e=>{"done"===e.message&&(i.Alert("已刪除該報名項目"),m())})),"n"===t&&i.Alert("取消刪除"),i.ResetConfirm()})),{data:g,teamList:_,divisionList:s,paramsList:u,getTeamList:o,registerList:k,groupSex:e=>{let i=!0;return _.value.forEach((t=>{t.team_id===g.team_id&&t.member_data_list.forEach((t=>{t.sex!==e&&(i=!1)}))})),i},remove:y,submitAll:w,language:(0,l.Fl)((()=>(0,W.oR)().state.language))}}}),ee=t(89);const ie=(0,ee.Z)(X,[["render",I],["__scopeId","data-v-294e18ec"]]);var te=ie}}]);
//# sourceMappingURL=795.fdd5159a.js.map
"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[718],{8924:function(l,e,t){t.d(e,{Z:function(){return y}});var n=t(3396),o=t(9242);const a={class:"fixed z-10 left-0 top-0 w-full h-screen bg-black bg-opacity-40 p-5 box-border overflow-hidden"},s={class:"box-border w-full h-full bg-white relative p-5 sm:p-10 flex flex-col overflow-hidden rounded"},d={class:"flex items-center"},i={class:"flex-grow font-medium"},u={class:"flex-grow h-full overflow-hidden p-1"};function r(l,e,t,r,c,p){return(0,n.wg)(),(0,n.j4)(o.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n._)("div",a,[(0,n._)("div",s,[(0,n._)("div",d,[(0,n._)("div",i,[(0,n.WI)(l.$slots,"title")]),(0,n._)("div",{class:"text-4xl text-gray-300 hover:text-gray-500 cursor-pointer duration-300 font-light",onClick:e[0]||(e[0]=(...e)=>l.closeModal&&l.closeModal(...e))},"×")]),(0,n._)("div",u,[(0,n.WI)(l.$slots,"content")])])])])),_:3})}var c=(0,n.aZ)({setup(l,e){function t(){e.emit("close_modal")}return{closeModal:t}}}),p=t(89);const _=(0,p.Z)(c,[["render",r]]);var y=_},6718:function(l,e,t){t.r(e),t.d(e,{default:function(){return oe}});var n=t(3396),o=t(7139),a=t(9242);const s=l=>((0,n.dD)("data-v-eb324eea"),l=l(),(0,n.Cn)(),l),d={class:"bg-white p-5 h-full flex flex-col overflow-hidden"},i=s((()=>(0,n._)("div",null,[(0,n._)("div",{class:"text-2xl"},"公告內容"),(0,n._)("hr",{class:"my-2"})],-1))),u={class:"flex-grow overflow-hidden"},r={class:"h-full overflow-y-auto"},c={class:"w-[32rem] md:w-full bulletin-table"},p=s((()=>(0,n._)("th",{class:"w-[5%]"},"置頂",-1))),_=s((()=>(0,n._)("th",{class:"w-[5%]"},"發布",-1))),y=s((()=>(0,n._)("th",{class:"w-[10%]"},"類別",-1))),w=s((()=>(0,n._)("th",{class:"w-[15%] text-left"},"日期",-1))),g=s((()=>(0,n._)("th",{class:"w-[30%] text-left"},"標題",-1))),m=s((()=>(0,n._)("th",{class:"w-[20%] text-left"},"單位",-1))),f={class:"w-[15%] text-left font-normal"},k={class:"text-center text-orange-400"},b={key:0},v={class:"text-center"},h={key:0,class:"text-green-500"},x={key:1,class:"text-red-500"},D={class:"text-center"},V={key:0,class:"category bg-green-600"},A={key:1,class:"category bg-yellow-500"},C={key:2,class:"category bg-blue-600"},U={key:3,class:"category bg-red-600"},R={class:"w-[30%] truncate max-w-0"},q={class:"w-[20%] truncate max-w-0"},H=["onClick"],M={class:"text-2xl"},j={key:0},O={key:1},P=s((()=>(0,n._)("hr",{class:"my-2"},null,-1)));function L(l,e,t,s,L,Z){const F=(0,n.up)("AddPost"),T=(0,n.up)("EditPost"),W=(0,n.up)("FullModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",d,[i,(0,n._)("div",u,[(0,n._)("div",r,[(0,n._)("table",c,[(0,n._)("tr",null,[p,_,y,w,g,m,(0,n._)("th",f,[(0,n._)("button",{onClick:e[0]||(e[0]=e=>l.displayModal=1)},"新增")])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.postList,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[(0,n._)("td",k,[1==e.pinned?((0,n.wg)(),(0,n.iD)("span",b,"⬤")):(0,n.kq)("",!0)]),(0,n._)("td",v,[1==e.release_status?((0,n.wg)(),(0,n.iD)("span",h,"⬤")):(0,n.kq)("",!0),0==e.release_status?((0,n.wg)(),(0,n.iD)("span",x,"⬤")):(0,n.kq)("",!0)]),(0,n._)("td",D,[0==e.category?((0,n.wg)(),(0,n.iD)("span",V,"一般公告")):(0,n.kq)("",!0),1==e.category?((0,n.wg)(),(0,n.iD)("span",A,"賽事資訊")):(0,n.kq)("",!0),2==e.category?((0,n.wg)(),(0,n.iD)("span",C,"檔案下載")):(0,n.kq)("",!0),3==e.category?((0,n.wg)(),(0,n.iD)("span",U,"重要公告")):(0,n.kq)("",!0)]),(0,n._)("td",null,(0,o.zw)(e.date),1),(0,n._)("td",R,(0,o.zw)(e.title),1),(0,n._)("td",q,(0,o.zw)(e.division_ch),1),(0,n._)("td",null,[(0,n._)("button",{onClick:t=>l.openPost(e)},"內容",8,H)])])))),128))])])])]),(0,n.wy)((0,n.Wm)(W,{onClose_modal:e[3]||(e[3]=e=>l.displayModal=0)},{title:(0,n.w5)((()=>[(0,n._)("div",M,[1==l.displayModal?((0,n.wg)(),(0,n.iD)("div",j,"新增公告")):(0,n.kq)("",!0),2==l.displayModal?((0,n.wg)(),(0,n.iD)("div",O,"公告內容")):(0,n.kq)("",!0)])])),content:(0,n.w5)((()=>[P,1==l.displayModal?((0,n.wg)(),(0,n.j4)(F,{key:0,onClose_modal:e[1]||(e[1]=e=>l.displayModal=0),onRefresh:l.getPost},null,8,["onRefresh"])):(0,n.kq)("",!0),2==l.displayModal?((0,n.wg)(),(0,n.j4)(T,{key:1,onClose_modal:e[2]||(e[2]=e=>l.displayModal=0),onRefresh:l.getPost,"post-data":l.selectedPost},null,8,["onRefresh","post-data"])):(0,n.kq)("",!0)])),_:1},512),[[a.F8,l.displayModal>0]])],64)}var Z=t(4870),F=t(8924);const T=l=>((0,n.dD)("data-v-70d03626"),l=l(),(0,n.Cn)(),l),W={class:"h-full overflow-y-auto pb-5"},z=T((()=>(0,n._)("td",{class:"w-[10%]"},"置頂",-1))),E={class:"w-[40%]"},G=T((()=>(0,n._)("td",{class:"w-[10%]"},"狀態",-1))),I={class:"w-[40%]"},J=T((()=>(0,n._)("td",null,"時間",-1))),N={colspan:"3"},S=T((()=>(0,n._)("td",null,"標題",-1))),Y={colspan:"3"},B=T((()=>(0,n._)("td",null,"類別",-1))),Q={colspan:"3"},K=T((()=>(0,n._)("option",{value:"0"},"一般公告",-1))),$=T((()=>(0,n._)("option",{value:"1"},"賽事資訊",-1))),X=T((()=>(0,n._)("option",{value:"2"},"檔案下載",-1))),ll=T((()=>(0,n._)("option",{value:"3"},"重要公告",-1))),el=[K,$,X,ll],tl=T((()=>(0,n._)("td",null,"內文",-1))),nl={colspan:"3"},ol=T((()=>(0,n._)("td",null,"連結",-1))),al={colspan:"3"},sl=["onUpdate:modelValue"],dl=["onUpdate:modelValue"],il=["onClick"];function ul(l,e,t,o,s,d){const i=(0,n.up)("Toggle"),u=(0,n.up)("QuillEditor");return(0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("table",null,[(0,n._)("tr",null,[z,(0,n._)("td",E,[(0,n.Wm)(i,{modelValue:l.pinned,"onUpdate:modelValue":e[0]||(e[0]=e=>l.pinned=e),falseValue:"0",trueValue:"1",offLabel:"無",onLabel:"置頂"},null,8,["modelValue"])]),G,(0,n._)("td",I,[(0,n.Wm)(i,{modelValue:l.status,"onUpdate:modelValue":e[1]||(e[1]=e=>l.status=e),falseValue:"0",trueValue:"1",offLabel:"隱藏",onLabel:"顯示"},null,8,["modelValue"])])]),(0,n._)("tr",null,[J,(0,n._)("td",N,[(0,n.wy)((0,n._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=e=>l.date=e)},null,512),[[a.nr,l.date]])])]),(0,n._)("tr",null,[S,(0,n._)("td",Y,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>l.title=e)},null,512),[[a.nr,l.title]])])]),(0,n._)("tr",null,[B,(0,n._)("td",Q,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[4]||(e[4]=e=>l.category=e)},el,512),[[a.bM,l.category]])])]),(0,n._)("tr",null,[tl,(0,n._)("td",nl,[(0,n.Wm)(u,{theme:"snow",toolbar:"full",content:l.content,"onUpdate:content":e[5]||(e[5]=e=>l.content=e),contentType:"html"},null,8,["content"])])]),(0,n._)("tr",null,[ol,(0,n._)("td",al,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.links,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"flex items-center mb-2"},[(0,n.wy)((0,n._)("input",{placeholder:"標題",class:"block mr-2",type:"text","onUpdate:modelValue":e=>l.links[t].title=e},null,8,sl),[[a.nr,l.links[t].title]]),(0,n.wy)((0,n._)("input",{placeholder:"網址",class:"block mr-2 flex-grow",type:"text","onUpdate:modelValue":e=>l.links[t].url=e},null,8,dl),[[a.nr,l.links[t].url]]),(0,n._)("div",{class:"cursor-pointer text-2xl hover:text-gray-500 duration-200",onClick:e=>l.links.splice(t,1)},"✕",8,il)])))),128)),(0,n._)("div",null,[(0,n._)("button",{onClick:e[6]||(e[6]=e=>l.links.push({url:"",title:""}))},"新增")])])])]),(0,n._)("div",null,[(0,n._)("button",{class:"w-full",onClick:e[7]||(e[7]=(...e)=>l.submitAll&&l.submitAll(...e))},"儲存")])])}var rl=t(6617),cl=t(3927),pl=t(6149),_l=(0,n.aZ)({setup(l,e){const t=new cl.L,n=new cl._,o=(0,Z.iH)(0),a=(0,Z.iH)(1),s=(0,Z.iH)(""),d=(0,Z.iH)(""),i=(0,Z.iH)(0),u=(0,Z.iH)(""),r=(0,Z.qj)([]);function c(){t.Dataset().AddObj("date",s).AddObj("category",i).AddObj("title",d).AddObj("content",u).AddObj("pinned",o).AddObj("release_status",a).Add("links",JSON.stringify(r)),new Blob([JSON.stringify(t.GetDset())]).size>1e7?n.Alert("總大小大於10Mb，無法上傳"):t.Url("bulletin/add").Post(t.GetDset()).then((l=>{"done"===l.message&&(n.Alert("已新增公告"),e.emit("refresh"),e.emit("close_modal"))}))}return{pinned:o,status:a,date:s,title:d,category:i,content:u,links:r,submitAll:c}},components:{Toggle:rl.Z,QuillEditor:pl.Bn}}),yl=t(89);const wl=(0,yl.Z)(_l,[["render",ul],["__scopeId","data-v-70d03626"]]);var gl=wl;const ml=l=>((0,n.dD)("data-v-300cb40e"),l=l(),(0,n.Cn)(),l),fl={class:"h-full overflow-y-auto pb-5"},kl=ml((()=>(0,n._)("td",{class:"w-[10%]"},"置頂",-1))),bl={class:"w-[40%]"},vl={key:0},hl={key:1,class:"text-orange-400"},xl=ml((()=>(0,n._)("td",{class:"w-[10%]"},"狀態",-1))),Dl={class:"w-[40%]"},Vl={key:0,class:"text-red-500"},Al={key:1,class:"text-green-500"},Cl=ml((()=>(0,n._)("td",null,"時間",-1))),Ul={colspan:"3"},Rl=["readonly"],ql=ml((()=>(0,n._)("td",null,"標題",-1))),Hl={colspan:"3"},Ml=["readonly"],jl=ml((()=>(0,n._)("td",null,"類別",-1))),Ol={colspan:"3"},Pl=["disabled"],Ll=ml((()=>(0,n._)("option",{value:"0"},"一般公告",-1))),Zl=ml((()=>(0,n._)("option",{value:"1"},"賽事資訊",-1))),Fl=ml((()=>(0,n._)("option",{value:"2"},"檔案下載",-1))),Tl=ml((()=>(0,n._)("option",{value:"3"},"重要公告",-1))),Wl=[Ll,Zl,Fl,Tl],zl=ml((()=>(0,n._)("td",null,"內文",-1))),El={colspan:"3"},Gl={key:0},Il={key:1,class:"max-h-48 overflow-auto whitespace-pre-wrap"},Jl=["innerHTML"],Nl=ml((()=>(0,n._)("td",null,"連結",-1))),Sl={colspan:"3"},Yl=["onUpdate:modelValue","readonly"],Bl=["onUpdate:modelValue","readonly"],Ql=["onClick"];function Kl(l,e,t,o,s,d){const i=(0,n.up)("Toggle"),u=(0,n.up)("QuillEditor");return(0,n.wg)(),(0,n.iD)("div",fl,[(0,n._)("table",null,[(0,n._)("tr",null,[kl,(0,n._)("td",bl,[(0,n.wy)((0,n.Wm)(i,{modelValue:l.pinned,"onUpdate:modelValue":e[0]||(e[0]=e=>l.pinned=e),falseValue:"0",trueValue:"1",offLabel:"無",onLabel:"置頂"},null,8,["modelValue"]),[[a.F8,!l.isReadonly]]),(0,n.wy)((0,n._)("span",null,[0==l.pinned?((0,n.wg)(),(0,n.iD)("span",vl,"無")):(0,n.kq)("",!0),1==l.pinned?((0,n.wg)(),(0,n.iD)("span",hl,"置頂")):(0,n.kq)("",!0)],512),[[a.F8,l.isReadonly]])]),xl,(0,n._)("td",Dl,[(0,n.wy)((0,n.Wm)(i,{modelValue:l.status,"onUpdate:modelValue":e[1]||(e[1]=e=>l.status=e),falseValue:"0",trueValue:"1",offLabel:"隱藏",onLabel:"顯示"},null,8,["modelValue"]),[[a.F8,!l.isReadonly]]),(0,n.wy)((0,n._)("span",null,[0==l.status?((0,n.wg)(),(0,n.iD)("span",Vl,"隱藏")):(0,n.kq)("",!0),1==l.status?((0,n.wg)(),(0,n.iD)("span",Al,"顯示")):(0,n.kq)("",!0)],512),[[a.F8,l.isReadonly]])])]),(0,n._)("tr",null,[Cl,(0,n._)("td",Ul,[(0,n.wy)((0,n._)("input",{type:"date",readonly:l.isReadonly,"onUpdate:modelValue":e[2]||(e[2]=e=>l.date=e)},null,8,Rl),[[a.nr,l.date]])])]),(0,n._)("tr",null,[ql,(0,n._)("td",Hl,[(0,n.wy)((0,n._)("input",{type:"text",readonly:l.isReadonly,"onUpdate:modelValue":e[3]||(e[3]=e=>l.title=e)},null,8,Ml),[[a.nr,l.title]])])]),(0,n._)("tr",null,[jl,(0,n._)("td",Ol,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[4]||(e[4]=e=>l.category=e),disabled:l.isReadonly},Wl,8,Pl),[[a.bM,l.category]])])]),(0,n._)("tr",null,[zl,(0,n._)("td",El,[l.isReadonly?((0,n.wg)(),(0,n.iD)("div",Il,[(0,n._)("div",{innerHTML:l.content},null,8,Jl)])):((0,n.wg)(),(0,n.iD)("div",Gl,[(0,n.Wm)(u,{theme:"snow",toolbar:"full",content:l.content,"onUpdate:content":e[5]||(e[5]=e=>l.content=e),contentType:"html"},null,8,["content"])]))])]),(0,n._)("tr",null,[Nl,(0,n._)("td",Sl,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.links,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"flex items-center mb-2"},[(0,n.wy)((0,n._)("input",{placeholder:"標題",class:"block mr-2",type:"text","onUpdate:modelValue":e=>l.links[t].title=e,readonly:l.isReadonly},null,8,Yl),[[a.nr,l.links[t].title]]),(0,n.wy)((0,n._)("input",{placeholder:"網址",class:"block mr-2 flex-grow",type:"text","onUpdate:modelValue":e=>l.links[t].url=e,readonly:l.isReadonly},null,8,Bl),[[a.nr,l.links[t].url]]),(0,n.wy)((0,n._)("div",{class:"cursor-pointer text-2xl hover:text-gray-500 duration-200",onClick:e=>l.links.splice(t,1)},"✕",8,Ql),[[a.F8,!l.isReadonly]])])))),128)),(0,n._)("div",null,[l.isReadonly?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e[6]||(e[6]=e=>l.links.push({url:"",title:""}))},"新增"))])])])]),(0,n._)("div",null,[l.isReadonly?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"w-full",onClick:e[7]||(e[7]=e=>l.isReadonly=!1)},"編輯")):(0,n.kq)("",!0),l.isReadonly?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"w-full",onClick:e[8]||(e[8]=(...e)=>l.submitAll&&l.submitAll(...e))},"儲存")),l.isReadonly?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:2,class:"w-full button-red",onClick:e[9]||(e[9]=(...e)=>l.deletePost&&l.deletePost(...e))},"刪除"))])])}var $l=t(65),Xl=(0,n.aZ)({props:["postData"],setup(l,e){const t=new cl.L,o=new cl._,a=(0,Z.iH)(!0),s=(0,$l.oR)(),d=(0,Z.qj)(l.postData),i=(0,Z.iH)(d.pinned),u=(0,Z.iH)(d.release_status),r=(0,Z.iH)(d.date),c=(0,Z.iH)(d.title),p=(0,Z.iH)(d.category),_=(0,Z.iH)(d.content),y=(0,Z.qj)(JSON.parse(d.links));function w(){t.Dataset().AddObj("date",r).AddObj("category",p).AddObj("title",c).AddObj("content",_).AddObj("pinned",i).AddObj("release_status",u).Add("links",JSON.stringify(y)),new Blob([JSON.stringify(t.GetDset())]).size>1e7?o.Alert("總大小大於10Mb，無法上傳"):t.Url("bulletin/edit").Patch(d.bulletin_id,t.GetDset()).then((l=>{"done"===l.message&&(o.Alert("已更新公告"),e.emit("close_modal"),e.emit("refresh"))}))}function g(){o.Confirm("確定要刪除嗎？")}const m=(0,n.Fl)((()=>s.state.confirmAnswer));return(0,n.YP)(m,(l=>{"y"===l&&(console.log(d),t.Url("bulletin/delete").Delete(d.bulletin_id).then((l=>{"done"===l.message&&(o.Alert("已刪除公告"),e.emit("close_modal"),e.emit("refresh"))}))),"n"===l&&o.Alert("取消刪除"),o.ResetConfirm()})),{pinned:i,status:u,date:r,title:c,category:p,content:_,links:y,submitAll:w,isReadonly:a,deletePost:g}},components:{Toggle:rl.Z,QuillEditor:pl.Bn}});const le=(0,yl.Z)(Xl,[["render",Kl],["__scopeId","data-v-300cb40e"]]);var ee=le,te=(0,n.aZ)({setup(){const l=(0,Z.iH)(0),e=new cl.L,t=(new cl._,(0,Z.iH)([])),n=(0,Z.iH)({});function o(){e.Url("bulletin/list").GetAll(t)}return o(),{displayModal:l,postList:t,selectedPost:n,openPost:e=>{n.value=e,l.value=2},getPost:o}},components:{FullModal:F.Z,AddPost:gl,EditPost:ee}});const ne=(0,yl.Z)(te,[["render",L],["__scopeId","data-v-eb324eea"]]);var oe=ne}}]);
//# sourceMappingURL=718.4452b95b.js.map
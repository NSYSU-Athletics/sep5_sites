"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[967],{6617:function(e,l,t){t.d(l,{Z:function(){return s}});var a=t(4870),n=t(3396),d=t(7139),o=t(9242),s={name:"Toggle",emits:["input","update:modelValue","change"],props:{value:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},modelValue:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},id:{type:[String,Number],required:!1,default:"toggle"},name:{type:[String,Number],required:!1,default:"toggle"},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},falseValue:{type:[String,Number,Boolean],required:!1,default:!1},trueValue:{type:[String,Number,Boolean],required:!1,default:!0},onLabel:{type:[String,Object],required:!1,default:""},offLabel:{type:[String,Object],required:!1,default:""},classes:{type:Object,required:!1,default:()=>({})},labelledby:{type:String,required:!1},describedby:{type:String,required:!1}},setup(e,l){const t=function(e,l,t){const{value:d,modelValue:o,falseValue:s,trueValue:i,disabled:u}=(0,a.BK)(e),c=o&&void 0!==o.value?o:d,r=(0,n.Fl)((()=>c.value===i.value)),p=e=>{l.emit("input",e),l.emit("update:modelValue",e),l.emit("change",e)},g=()=>{p(i.value)},y=()=>{p(s.value)};return-1!==[null,void 0,!1,0,"0","off"].indexOf(c.value)&&-1===[s.value,i.value].indexOf(c.value)&&y(),-1!==[!0,1,"1","on"].indexOf(c.value)&&-1===[s.value,i.value].indexOf(c.value)&&g(),{externalValue:c,checked:r,update:p,check:g,uncheck:y,handleInput:e=>{p(e.target.checked?i.value:s.value)},handleClick:()=>{u.value||(r.value?y():g())}}}(e,l),d=function(e,l,t){const{trueValue:d,falseValue:o,onLabel:s,offLabel:i}=(0,a.BK)(e),u=t.checked,c=t.update;return{label:(0,n.Fl)((()=>{let e=u.value?s.value:i.value;return e||(e="&nbsp;"),e})),toggle:()=>{c(u.value?o.value:d.value)},on:()=>{c(d.value)},off:()=>{c(o.value)}}}(e,0,{checked:t.checked,update:t.update}),o=function(e,l,t){const d=(0,a.BK)(e),o=d.disabled,s=t.checked,i=(0,n.Fl)((()=>({container:"toggle-container",toggle:"toggle",toggleOn:"toggle-on",toggleOff:"toggle-off",toggleOnDisabled:"toggle-on-disabled",toggleOffDisabled:"toggle-off-disabled",handle:"toggle-handle",handleOn:"toggle-handle-on",handleOff:"toggle-handle-off",handleOnDisabled:"toggle-handle-on-disabled",handleOffDisabled:"toggle-handle-off-disabled",label:"toggle-label",...d.classes.value})));return{classList:(0,n.Fl)((()=>({container:i.value.container,toggle:[i.value.toggle,o.value?s.value?i.value.toggleOnDisabled:i.value.toggleOffDisabled:s.value?i.value.toggleOn:i.value.toggleOff],handle:[i.value.handle,o.value?s.value?i.value.handleOnDisabled:i.value.handleOffDisabled:s.value?i.value.handleOn:i.value.handleOff],label:i.value.label})))}}(e,0,{checked:t.checked}),s=function(e,l,t){const{disabled:n}=(0,a.BK)(e),d=t.check,o=t.uncheck,s=t.checked;return{handleSpace:()=>{n.value||(s.value?o():d())}}}(e,0,{check:t.check,uncheck:t.uncheck,checked:t.checked});return{...t,...o,...d,...s}}};const i=["tabindex","aria-checked","aria-describedby","aria-labelledby"],u=["id","name","value","checked","disabled"],c=["innerHTML"],r=["checked"];s.render=function(e,l,t,a,s,p){return(0,n.wg)(),(0,n.iD)("div",{class:(0,d.C_)(e.classList.container),tabindex:t.disabled?void 0:0,"aria-checked":e.checked,"aria-describedby":t.describedby,"aria-labelledby":t.labelledby,role:"switch",onKeyup:l[1]||(l[1]=(0,o.D2)(((...l)=>e.handleSpace&&e.handleSpace(...l)),["space"]))},[(0,n.wy)((0,n._)("input",{type:"checkbox",id:t.id,name:t.name,value:t.trueValue,checked:e.checked,disabled:t.disabled},null,8,u),[[o.F8,!1]]),(0,n._)("div",{class:(0,d.C_)(e.classList.toggle),onClick:l[0]||(l[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[(0,n._)("span",{class:(0,d.C_)(e.classList.handle)},null,2),(0,n.WI)(e.$slots,"label",{checked:e.checked,classList:e.classList},(()=>[(0,n._)("span",{class:(0,d.C_)(e.classList.label),innerHTML:e.label},null,10,c)])),t.required?((0,n.wg)(),(0,n.iD)("input",{key:0,type:"checkbox",style:{appearance:"none",height:"1px",margin:"0",padding:"0",fontSize:"0",background:"transparent",position:"absolute",width:"100%",bottom:"0",outline:"none"},checked:e.checked,"aria-hidden":"true",tabindex:"-1",required:""},null,8,r)):(0,n.kq)("v-if",!0)],2)],42,i)},s.__file="src/Toggle.vue"},7967:function(e,l,t){t.r(l),t.d(l,{default:function(){return Xe}});var a=t(3396),n=t(7139),d=t(9242);const o=e=>((0,a.dD)("data-v-64731c8e"),e=e(),(0,a.Cn)(),e),s={class:"bg-white p-5 h-full flex flex-col overflow-hidden"},i=o((()=>(0,a._)("div",null,[(0,a._)("div",{class:"text-2xl"},"公告內容"),(0,a._)("hr",{class:"my-2"})],-1))),u={class:"flex-grow overflow-hidden"},c={class:"h-full overflow-y-auto"},r={class:"w-[32rem] md:w-full bulletin-table"},p=o((()=>(0,a._)("th",{class:"w-[5%]"},"置頂",-1))),g=o((()=>(0,a._)("th",{class:"w-[5%]"},"發布",-1))),y=o((()=>(0,a._)("th",{class:"w-[10%]"},"類別",-1))),b=o((()=>(0,a._)("th",{class:"w-[15%] text-left"},"日期",-1))),_=o((()=>(0,a._)("th",{class:"w-[30%] text-left"},"標題",-1))),f=o((()=>(0,a._)("th",{class:"w-[20%] text-left"},"單位",-1))),k={class:"w-[15%] text-left font-normal"},v={class:"text-center text-orange-400"},h={key:0},m={class:"text-center"},w={key:0,class:"text-green-500"},x={key:1,class:"text-red-500"},V={class:"text-center"},D={key:0,class:"category bg-green-600"},O={key:1,class:"category bg-yellow-500"},q={key:2,class:"category bg-blue-600"},C={key:3,class:"category bg-red-600"},A={class:"w-[30%] truncate max-w-0"},L={class:"w-[20%] truncate max-w-0"},U=["onClick"],R={class:"text-2xl"},H={key:0},j={key:1},P=o((()=>(0,a._)("hr",{class:"my-2"},null,-1)));function S(e,l,t,o,S,M){const F=(0,a.up)("AddPost"),Z=(0,a.up)("EditPost"),B=(0,a.up)("SmallModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[i,(0,a._)("div",u,[(0,a._)("div",c,[(0,a._)("table",r,[(0,a._)("tr",null,[p,g,y,b,_,f,(0,a._)("th",k,[(0,a._)("button",{onClick:l[0]||(l[0]=l=>e.displayModal=1)},"新增")])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.postList,((l,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",v,[1==l.pinned?((0,a.wg)(),(0,a.iD)("span",h,"⬤")):(0,a.kq)("",!0)]),(0,a._)("td",m,[1==l.release_status?((0,a.wg)(),(0,a.iD)("span",w,"⬤")):(0,a.kq)("",!0),0==l.release_status?((0,a.wg)(),(0,a.iD)("span",x,"⬤")):(0,a.kq)("",!0)]),(0,a._)("td",V,[0==l.category?((0,a.wg)(),(0,a.iD)("span",D,"一般公告")):(0,a.kq)("",!0),1==l.category?((0,a.wg)(),(0,a.iD)("span",O,"賽事資訊")):(0,a.kq)("",!0),2==l.category?((0,a.wg)(),(0,a.iD)("span",q,"檔案下載")):(0,a.kq)("",!0),3==l.category?((0,a.wg)(),(0,a.iD)("span",C,"重要公告")):(0,a.kq)("",!0)]),(0,a._)("td",null,(0,n.zw)(l.date),1),(0,a._)("td",A,(0,n.zw)(l.title),1),(0,a._)("td",L,(0,n.zw)(l.division_ch),1),(0,a._)("td",null,[(0,a._)("button",{onClick:t=>e.openPost(l)},"內容",8,U)])])))),128))])])])]),(0,a.wy)((0,a.Wm)(B,{onClose_modal:l[3]||(l[3]=l=>e.displayModal=0)},{title:(0,a.w5)((()=>[(0,a._)("div",R,[1==e.displayModal?((0,a.wg)(),(0,a.iD)("div",H,"新增公告")):(0,a.kq)("",!0),2==e.displayModal?((0,a.wg)(),(0,a.iD)("div",j,"公告內容")):(0,a.kq)("",!0)])])),content:(0,a.w5)((()=>[P,1==e.displayModal?((0,a.wg)(),(0,a.j4)(F,{key:0,onClose_modal:l[1]||(l[1]=l=>e.displayModal=0),onRefresh:e.getPost},null,8,["onRefresh"])):(0,a.kq)("",!0),2==e.displayModal?((0,a.wg)(),(0,a.j4)(Z,{key:1,onClose_modal:l[2]||(l[2]=l=>e.displayModal=0),onRefresh:e.getPost,"post-data":e.selectedPost},null,8,["onRefresh","post-data"])):(0,a.kq)("",!0)])),_:1},512),[[d.F8,e.displayModal>0]])],64)}var M=t(4870),F=t(1435);const Z=e=>((0,a.dD)("data-v-3184d1f7"),e=e(),(0,a.Cn)(),e),B=Z((()=>(0,a._)("td",{class:"w-[10%]"},"置頂",-1))),K={class:"w-[40%]"},T=Z((()=>(0,a._)("td",{class:"w-[10%]"},"狀態",-1))),N={class:"w-[40%]"},W=Z((()=>(0,a._)("td",null,"時間",-1))),I={colspan:"3"},Y=Z((()=>(0,a._)("td",null,"標題",-1))),z={colspan:"3"},G=Z((()=>(0,a._)("td",null,"類別",-1))),J={colspan:"3"},E=Z((()=>(0,a._)("option",{value:"0"},"一般公告",-1))),$=Z((()=>(0,a._)("option",{value:"1"},"賽事資訊",-1))),Q=Z((()=>(0,a._)("option",{value:"2"},"檔案下載",-1))),X=Z((()=>(0,a._)("option",{value:"3"},"重要公告",-1))),ee=[E,$,Q,X],le=Z((()=>(0,a._)("td",null,"內文",-1))),te={colspan:"3"},ae=Z((()=>(0,a._)("td",null,"連結",-1))),ne={colspan:"3"},de=["onUpdate:modelValue"],oe=["onUpdate:modelValue"],se=["onClick"];function ie(e,l,t,n,o,s){const i=(0,a.up)("Toggle");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("table",null,[(0,a._)("tr",null,[B,(0,a._)("td",K,[(0,a.Wm)(i,{modelValue:e.pinned,"onUpdate:modelValue":l[0]||(l[0]=l=>e.pinned=l),falseValue:"0",trueValue:"1",offLabel:"無",onLabel:"置頂"},null,8,["modelValue"])]),T,(0,a._)("td",N,[(0,a.Wm)(i,{modelValue:e.status,"onUpdate:modelValue":l[1]||(l[1]=l=>e.status=l),falseValue:"0",trueValue:"1",offLabel:"隱藏",onLabel:"顯示"},null,8,["modelValue"])])]),(0,a._)("tr",null,[W,(0,a._)("td",I,[(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=l=>e.date=l)},null,512),[[d.nr,e.date]])])]),(0,a._)("tr",null,[Y,(0,a._)("td",z,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=l=>e.title=l)},null,512),[[d.nr,e.title]])])]),(0,a._)("tr",null,[G,(0,a._)("td",J,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":l[4]||(l[4]=l=>e.category=l)},ee,512),[[d.bM,e.category]])])]),(0,a._)("tr",null,[le,(0,a._)("td",te,[(0,a.wy)((0,a._)("textarea",{rows:"5","onUpdate:modelValue":l[5]||(l[5]=l=>e.content=l)},null,512),[[d.nr,e.content]])])]),(0,a._)("tr",null,[ae,(0,a._)("td",ne,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.links,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"flex items-center mb-2"},[(0,a.wy)((0,a._)("input",{placeholder:"標題",class:"block mr-2",type:"text","onUpdate:modelValue":l=>e.links[t].title=l},null,8,de),[[d.nr,e.links[t].title]]),(0,a.wy)((0,a._)("input",{placeholder:"網址",class:"block mr-2 flex-grow",type:"text","onUpdate:modelValue":l=>e.links[t].url=l},null,8,oe),[[d.nr,e.links[t].url]]),(0,a._)("div",{class:"cursor-pointer text-2xl hover:text-gray-500 duration-200",onClick:l=>e.links.splice(t,1)},"✕",8,se)])))),128)),(0,a._)("div",null,[(0,a._)("button",{onClick:l[6]||(l[6]=l=>e.links.push({url:"",title:""}))},"新增")])])])]),(0,a._)("div",null,[(0,a._)("button",{class:"w-full",onClick:l[7]||(l[7]=(...l)=>e.submitAll&&e.submitAll(...l))},"儲存")])])}var ue=t(6617),ce=t(3927),re=(0,a.aZ)({setup(e,l){const t=new ce.L,a=new ce._,n=(0,M.iH)(0),d=(0,M.iH)(1),o=(0,M.iH)(""),s=(0,M.iH)(""),i=(0,M.iH)(0),u=(0,M.iH)(""),c=(0,M.qj)([]);function r(){t.Dataset().AddObj("date",o).AddObj("category",i).AddObj("title",s).AddObj("content",u).AddObj("pinned",n).AddObj("release_status",d).Add("links",JSON.stringify(c)),t.Url("bulletin/add").Post(t.GetDset()).then((e=>{"done"===e.message&&(a.Alert("已新增公告"),l.emit("refresh"),l.emit("close_modal"))}))}return{pinned:n,status:d,date:o,title:s,category:i,content:u,links:c,submitAll:r}},components:{Toggle:ue.Z}}),pe=t(89);const ge=(0,pe.Z)(re,[["render",ie],["__scopeId","data-v-3184d1f7"]]);var ye=ge;const be=e=>((0,a.dD)("data-v-7ffcc4e8"),e=e(),(0,a.Cn)(),e),_e=be((()=>(0,a._)("td",{class:"w-[10%]"},"置頂",-1))),fe={class:"w-[40%]"},ke={key:0},ve={key:1,class:"text-orange-400"},he=be((()=>(0,a._)("td",{class:"w-[10%]"},"狀態",-1))),me={class:"w-[40%]"},we={key:0,class:"text-red-500"},xe={key:1,class:"text-green-500"},Ve=be((()=>(0,a._)("td",null,"時間",-1))),De={colspan:"3"},Oe=["readonly"],qe=be((()=>(0,a._)("td",null,"標題",-1))),Ce={colspan:"3"},Ae=["readonly"],Le=be((()=>(0,a._)("td",null,"類別",-1))),Ue={colspan:"3"},Re=["disabled"],He=be((()=>(0,a._)("option",{value:"0"},"一般公告",-1))),je=be((()=>(0,a._)("option",{value:"1"},"賽事資訊",-1))),Pe=be((()=>(0,a._)("option",{value:"2"},"檔案下載",-1))),Se=be((()=>(0,a._)("option",{value:"3"},"重要公告",-1))),Me=[He,je,Pe,Se],Fe=be((()=>(0,a._)("td",null,"內文",-1))),Ze={colspan:"3"},Be=["readonly"],Ke=be((()=>(0,a._)("td",null,"連結",-1))),Te={colspan:"3"},Ne=["onUpdate:modelValue","readonly"],We=["onUpdate:modelValue","readonly"],Ie=["onClick"];function Ye(e,l,t,n,o,s){const i=(0,a.up)("Toggle");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("table",null,[(0,a._)("tr",null,[_e,(0,a._)("td",fe,[(0,a.wy)((0,a.Wm)(i,{modelValue:e.pinned,"onUpdate:modelValue":l[0]||(l[0]=l=>e.pinned=l),falseValue:"0",trueValue:"1",offLabel:"無",onLabel:"置頂"},null,8,["modelValue"]),[[d.F8,!e.isReadonly]]),(0,a.wy)((0,a._)("span",null,[0==e.pinned?((0,a.wg)(),(0,a.iD)("span",ke,"無")):(0,a.kq)("",!0),1==e.pinned?((0,a.wg)(),(0,a.iD)("span",ve,"置頂")):(0,a.kq)("",!0)],512),[[d.F8,e.isReadonly]])]),he,(0,a._)("td",me,[(0,a.wy)((0,a.Wm)(i,{modelValue:e.status,"onUpdate:modelValue":l[1]||(l[1]=l=>e.status=l),falseValue:"0",trueValue:"1",offLabel:"隱藏",onLabel:"顯示"},null,8,["modelValue"]),[[d.F8,!e.isReadonly]]),(0,a.wy)((0,a._)("span",null,[0==e.status?((0,a.wg)(),(0,a.iD)("span",we,"隱藏")):(0,a.kq)("",!0),1==e.status?((0,a.wg)(),(0,a.iD)("span",xe,"顯示")):(0,a.kq)("",!0)],512),[[d.F8,e.isReadonly]])])]),(0,a._)("tr",null,[Ve,(0,a._)("td",De,[(0,a.wy)((0,a._)("input",{type:"date",readonly:e.isReadonly,"onUpdate:modelValue":l[2]||(l[2]=l=>e.date=l)},null,8,Oe),[[d.nr,e.date]])])]),(0,a._)("tr",null,[qe,(0,a._)("td",Ce,[(0,a.wy)((0,a._)("input",{type:"text",readonly:e.isReadonly,"onUpdate:modelValue":l[3]||(l[3]=l=>e.title=l)},null,8,Ae),[[d.nr,e.title]])])]),(0,a._)("tr",null,[Le,(0,a._)("td",Ue,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":l[4]||(l[4]=l=>e.category=l),disabled:e.isReadonly},Me,8,Re),[[d.bM,e.category]])])]),(0,a._)("tr",null,[Fe,(0,a._)("td",Ze,[(0,a.wy)((0,a._)("textarea",{rows:"5","onUpdate:modelValue":l[5]||(l[5]=l=>e.content=l),readonly:e.isReadonly},null,8,Be),[[d.nr,e.content]])])]),(0,a._)("tr",null,[Ke,(0,a._)("td",Te,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.links,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"flex items-center mb-2"},[(0,a.wy)((0,a._)("input",{placeholder:"標題",class:"block mr-2",type:"text","onUpdate:modelValue":l=>e.links[t].title=l,readonly:e.isReadonly},null,8,Ne),[[d.nr,e.links[t].title]]),(0,a.wy)((0,a._)("input",{placeholder:"網址",class:"block mr-2 flex-grow",type:"text","onUpdate:modelValue":l=>e.links[t].url=l,readonly:e.isReadonly},null,8,We),[[d.nr,e.links[t].url]]),(0,a.wy)((0,a._)("div",{class:"cursor-pointer text-2xl hover:text-gray-500 duration-200",onClick:l=>e.links.splice(t,1)},"✕",8,Ie),[[d.F8,!e.isReadonly]])])))),128)),(0,a._)("div",null,[e.isReadonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:l[6]||(l[6]=l=>e.links.push({url:"",title:""}))},"新增"))])])])]),(0,a._)("div",null,[e.isReadonly?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"w-full",onClick:l[7]||(l[7]=l=>e.isReadonly=!1)},"編輯")):(0,a.kq)("",!0),e.isReadonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:1,class:"w-full",onClick:l[8]||(l[8]=(...l)=>e.submitAll&&e.submitAll(...l))},"儲存")),e.isReadonly?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:2,class:"w-full button-red",onClick:l[9]||(l[9]=(...l)=>e.deletePost&&e.deletePost(...l))},"刪除"))])])}var ze=t(65),Ge=(0,a.aZ)({props:["postData"],setup(e,l){const t=new ce.L,n=new ce._,d=(0,M.iH)(!0),o=(0,ze.oR)(),s=(0,M.qj)(e.postData),i=(0,M.iH)(s.pinned),u=(0,M.iH)(s.release_status),c=(0,M.iH)(s.date),r=(0,M.iH)(s.title),p=(0,M.iH)(s.category),g=(0,M.iH)(s.content),y=(0,M.qj)(JSON.parse(s.links));function b(){t.Dataset().AddObj("date",c).AddObj("category",p).AddObj("title",r).AddObj("content",g).AddObj("pinned",i).AddObj("release_status",u).Add("links",JSON.stringify(y)),t.Url("bulletin/edit").Patch(s.bulletin_id,t.GetDset()).then((e=>{"done"===e.message&&(n.Alert("已更新公告"),l.emit("close_modal"),l.emit("refresh"))}))}function _(){n.Confirm("確定要刪除嗎？")}const f=(0,a.Fl)((()=>o.state.confirmAnswer));return(0,a.YP)(f,(e=>{"y"===e&&(console.log(s),t.Url("bulletin/delete").Delete(s.bulletin_id).then((e=>{"done"===e.message&&(n.Alert("已刪除公告"),l.emit("close_modal"),l.emit("refresh"))}))),"n"===e&&n.Alert("取消刪除"),n.ResetConfirm()})),{pinned:i,status:u,date:c,title:r,category:p,content:g,links:y,submitAll:b,isReadonly:d,deletePost:_}},components:{Toggle:ue.Z}});const Je=(0,pe.Z)(Ge,[["render",Ye],["__scopeId","data-v-7ffcc4e8"]]);var Ee=Je,$e=(0,a.aZ)({setup(){const e=(0,M.iH)(0),l=new ce.L,t=(new ce._,(0,M.iH)([])),a=(0,M.iH)({});function n(){l.Url("bulletin/list").GetAll(t)}return n(),{displayModal:e,postList:t,selectedPost:a,openPost:l=>{a.value=l,e.value=2},getPost:n}},components:{SmallModal:F.Z,AddPost:ye,EditPost:Ee}});const Qe=(0,pe.Z)($e,[["render",S],["__scopeId","data-v-64731c8e"]]);var Xe=Qe}}]);
//# sourceMappingURL=967.27741861.js.map
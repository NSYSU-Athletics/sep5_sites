"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[478],{8478:function(l,e,a){a.r(e),a.d(e,{default:function(){return zl}});var t=a(3396),n=a(7139),d=a(9242);const s=l=>((0,t.dD)("data-v-0a08f248"),l=l(),(0,t.Cn)(),l),i={class:"bg-white p-5 h-full flex flex-col overflow-hidden"},o=s((()=>(0,t._)("div",null,[(0,t._)("div",{class:"text-2xl"},"賽事列表"),(0,t._)("hr",{class:"my-2"})],-1))),u={class:"flex-grow overflow-hidden"},_={class:"h-full overflow-y-auto"},r={class:"w-[32rem] md:w-full bulletin-table"},m=s((()=>(0,t._)("th",{class:"w-[15%] text-left"},"比賽日期",-1))),c=s((()=>(0,t._)("th",{class:"w-[35%] text-left"},"賽事名稱",-1))),p=s((()=>(0,t._)("th",{class:"w-[20%] text-left"},"負責單位",-1))),w=s((()=>(0,t._)("th",{class:"w-[15%]"},"運動項目",-1))),y={class:"w-[15%] text-left font-normal"},f={key:0},g={class:"truncate max-w-0"},v={class:"truncate max-w-0"},b={key:0,class:"inline-block ml-2"},h={class:"text-center"},V=["onClick"],U={class:"text-2xl"},H={key:0},k=s((()=>(0,t._)("hr",{class:"my-2"},null,-1)));function D(l,e,a,s,D,A){const O=(0,t.up)("AddGame"),L=(0,t.up)("SmallModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[o,(0,t._)("div",u,[(0,t._)("div",_,[(0,t._)("table",r,[(0,t._)("tr",null,[m,c,p,w,(0,t._)("th",y,[(0,t._)("button",{onClick:e[0]||(e[0]=e=>l.displayModal=1)},"新增")])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.gameList,((e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,{key:a},[l.sports.includes(e.type)||l.division.permission>1?((0,t.wg)(),(0,t.iD)("tr",f,[(0,t._)("td",null,(0,n.zw)(e.event_start),1),(0,t._)("td",g,(0,n.zw)(e.name_ch),1),(0,t._)("td",v,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.divisionList,((l,a)=>((0,t.wg)(),(0,t.iD)(t.HY,{key:a},[JSON.parse(e.host_division).indexOf(l.division_id)>-1?((0,t.wg)(),(0,t.iD)("span",b,(0,n.zw)(l.name_ch),1)):(0,t.kq)("",!0)],64)))),128))]),(0,t._)("td",h,(0,n.zw)(e.sport_ch),1),(0,t._)("td",null,[(0,t._)("button",{onClick:a=>l.openGame(e.game_id,e.type)},"開啟",8,V)])])):(0,t.kq)("",!0)],64)))),128))])])])]),(0,t.wy)((0,t.Wm)(L,{onClose_modal:e[2]||(e[2]=e=>l.displayModal=0)},{title:(0,t.w5)((()=>[(0,t._)("div",U,[1==l.displayModal?((0,t.wg)(),(0,t.iD)("div",H,"新增賽事")):(0,t.kq)("",!0)])])),content:(0,t.w5)((()=>[k,1==l.displayModal?((0,t.wg)(),(0,t.j4)(O,{key:0,onClose_modal:e[1]||(e[1]=e=>l.displayModal=0),onRefresh:l.getGames},null,8,["onRefresh"])):(0,t.kq)("",!0)])),_:1},512),[[d.F8,l.displayModal>0]])],64)}a(7658);var A=a(4870),O=a(1435),L=a(3927);const x=l=>((0,t.dD)("data-v-a2f6fa7e"),l=l(),(0,t.Cn)(),l),G={class:"h-full overflow-y-auto pb-5"},j=x((()=>(0,t._)("td",{class:"w-[20%]"},"報名系統",-1))),S={class:"w-[30%]"},M=x((()=>(0,t._)("td",{class:"w-[20%]"},null,-1))),C=x((()=>(0,t._)("td",{class:"w-[30%]"},null,-1))),W=x((()=>(0,t._)("td",null,"賽事中文",-1))),Y={colspan:"3"},q=x((()=>(0,t._)("td",null,"賽事英文",-1))),E={colspan:"3"},z=x((()=>(0,t._)("td",null,"賽事說明",-1))),R={colspan:"3"},Z=x((()=>(0,t._)("td",null,"運動項目",-1))),T={colspan:"3"},J=["value"],K=x((()=>(0,t._)("td",null,"負責單位",-1))),N={colspan:"3"},$={key:0,class:"inline-block m-1 border-2 rounded py-1 px-2"},I=x((()=>(0,t._)("td",null,"比賽日期",-1))),B={colspan:"3"},F=x((()=>(0,t._)("td",null,"報名開始",-1))),Q={colspan:"3"},P=x((()=>(0,t._)("td",null,"報名結束",-1))),X={colspan:"3"},ll=x((()=>(0,t._)("td",null,"比賽類型",-1))),el={colspan:"3"},al={class:"flex"},tl=x((()=>(0,t._)("span",null,"一般",-1))),nl=x((()=>(0,t._)("span",null,"新生",-1))),dl=x((()=>(0,t._)("span",null,"系際",-1))),sl=x((()=>(0,t._)("td",{class:"w-[20%]"},"比賽性質",-1))),il={class:"w-[30%]"},ol=x((()=>(0,t._)("td",{class:"w-[20%]"},"報名單位",-1))),ul={class:"w-[30%]"},_l=x((()=>(0,t._)("td",{class:"w-[20%]"},"報名選手限同系所",-1))),rl={class:"w-[30%]"},ml=x((()=>(0,t._)("td",{class:"w-[20%]"},"報名選手限同團體",-1))),cl={class:"w-[30%]"},pl=x((()=>(0,t._)("td",{class:"w-[20%]"},"同一單位限報一隊",-1))),wl={class:"w-[30%]"},yl=x((()=>(0,t._)("td",null,"使用報名系統",-1))),fl=x((()=>(0,t._)("td",null,"自有報名系統",-1))),gl=["disabled"],vl=x((()=>(0,t._)("td",null,"使用管理系統",-1))),bl=x((()=>(0,t._)("td",null,"自有管理系統",-1))),hl=["disabled"],Vl=x((()=>(0,t._)("td",null,"使用網站頁面",-1))),Ul=x((()=>(0,t._)("td",null,"自有網站頁面",-1))),Hl=["disabled"],kl={class:"text-2xl"},Dl={key:0},Al=x((()=>(0,t._)("hr",{class:"my-2"},null,-1))),Ol=["value"];function Ll(l,e,a,s,i,o){const u=(0,t.up)("Toggle"),_=(0,t.up)("QuillEditor"),r=(0,t.up)("SmallModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",G,[(0,t._)("table",null,[(0,t._)("tr",null,[j,(0,t._)("td",S,[(0,t.Wm)(u,{modelValue:l.regSwitch,"onUpdate:modelValue":e[0]||(e[0]=e=>l.regSwitch=e),falseValue:"0",trueValue:"1",offLabel:"關閉",onLabel:"開啟"},null,8,["modelValue"])]),M,C]),(0,t._)("tr",null,[W,(0,t._)("td",Y,[(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=e=>l.nameCh=e)},null,512),[[d.nr,l.nameCh]])])]),(0,t._)("tr",null,[q,(0,t._)("td",E,[(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=e=>l.nameEn=e)},null,512),[[d.nr,l.nameEn]])])]),(0,t._)("tr",null,[z,(0,t._)("td",R,[(0,t.Wm)(_,{theme:"snow",toolbar:"full",content:l.info,"onUpdate:content":e[3]||(e[3]=e=>l.info=e),contentType:"html"},null,8,["content"])])]),(0,t._)("tr",null,[Z,(0,t._)("td",T,[(0,t.wy)((0,t._)("select",{"onUpdate:modelValue":e[4]||(e[4]=e=>l.type=e)},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.sportList,((l,e)=>((0,t.wg)(),(0,t.iD)("option",{key:e,value:l.code},(0,n.zw)(l.name_ch),9,J)))),128))],512),[[d.bM,l.type]])])]),(0,t._)("tr",null,[K,(0,t._)("td",N,[(0,t._)("div",null,[(0,t._)("button",{onClick:e[5]||(e[5]=e=>l.displayModal=1)},"選取")]),(0,t._)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.divisionList,((e,a)=>((0,t.wg)(),(0,t.iD)(t.HY,{key:a},[l.hostDivision.indexOf(e.division_id)>-1?((0,t.wg)(),(0,t.iD)("span",$,(0,n.zw)(e.name_ch),1)):(0,t.kq)("",!0)],64)))),128))])])]),(0,t._)("tr",null,[I,(0,t._)("td",B,[(0,t.wy)((0,t._)("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=e=>l.eventStart=e)},null,512),[[d.nr,l.eventStart]])])]),(0,t._)("tr",null,[F,(0,t._)("td",Q,[(0,t.wy)((0,t._)("input",{type:"datetime-local","onUpdate:modelValue":e[7]||(e[7]=e=>l.regStart=e)},null,512),[[d.nr,l.regStart]])])]),(0,t._)("tr",null,[P,(0,t._)("td",X,[(0,t.wy)((0,t._)("input",{type:"datetime-local","onUpdate:modelValue":e[8]||(e[8]=e=>l.regEnd=e)},null,512),[[d.nr,l.regEnd]])])]),(0,t._)("tr",null,[ll,(0,t._)("td",el,[(0,t._)("div",al,[(0,t._)("label",null,[(0,t.wy)((0,t._)("input",{type:"radio",value:"0","onUpdate:modelValue":e[9]||(e[9]=e=>l.nsysuGame=e)},null,512),[[d.G2,l.nsysuGame]]),tl]),(0,t._)("label",null,[(0,t.wy)((0,t._)("input",{type:"radio",value:"1","onUpdate:modelValue":e[10]||(e[10]=e=>l.nsysuGame=e)},null,512),[[d.G2,l.nsysuGame]]),nl]),(0,t._)("label",null,[(0,t.wy)((0,t._)("input",{type:"radio",value:"2","onUpdate:modelValue":e[11]||(e[11]=e=>l.nsysuGame=e)},null,512),[[d.G2,l.nsysuGame]]),dl])])])]),(0,t._)("tr",null,[sl,(0,t._)("td",il,[(0,t.Wm)(u,{modelValue:l.nsysu,"onUpdate:modelValue":e[12]||(e[12]=e=>l.nsysu=e),falseValue:"0",trueValue:"1",offLabel:"校內",onLabel:"校外"},null,8,["modelValue"])]),ol,(0,t._)("td",ul,[(0,t.Wm)(u,{modelValue:l.regUnit,"onUpdate:modelValue":e[13]||(e[13]=e=>l.regUnit=e),falseValue:"0",trueValue:"1",offLabel:"團體",onLabel:"系所"},null,8,["modelValue"])])]),(0,t._)("tr",null,[1==l.regUnit?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[_l,(0,t._)("td",rl,[(0,t.Wm)(u,{modelValue:l.sameDept,"onUpdate:modelValue":e[14]||(e[14]=e=>l.sameDept=e),falseValue:"0",trueValue:"1",offLabel:"不限",onLabel:"限制"},null,8,["modelValue"])])],64)):(0,t.kq)("",!0),0==l.regUnit?((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[ml,(0,t._)("td",cl,[(0,t.Wm)(u,{modelValue:l.sameOrg,"onUpdate:modelValue":e[15]||(e[15]=e=>l.sameOrg=e),falseValue:"0",trueValue:"1",offLabel:"不限",onLabel:"限制"},null,8,["modelValue"])])],64)):(0,t.kq)("",!0),pl,(0,t._)("td",wl,[(0,t.Wm)(u,{modelValue:l.onlyTeam,"onUpdate:modelValue":e[16]||(e[16]=e=>l.onlyTeam=e),falseValue:"0",trueValue:"1",offLabel:"不限",onLabel:"限制"},null,8,["modelValue"])])]),(0,t._)("tr",null,[yl,(0,t._)("td",null,[(0,t.Wm)(u,{modelValue:l.useReg,"onUpdate:modelValue":e[17]||(e[17]=e=>l.useReg=e),falseValue:"0",trueValue:"1",offLabel:"否",onLabel:"是"},null,8,["modelValue"])]),fl,(0,t._)("td",null,[(0,t.wy)((0,t._)("input",{type:"text",disabled:1==l.useReg,"onUpdate:modelValue":e[18]||(e[18]=e=>l.regUrl=e),placeholder:"請輸入網址"},null,8,gl),[[d.nr,l.regUrl]])])]),(0,t._)("tr",null,[vl,(0,t._)("td",null,[(0,t.Wm)(u,{modelValue:l.useManage,"onUpdate:modelValue":e[19]||(e[19]=e=>l.useManage=e),falseValue:"0",trueValue:"1",offLabel:"否",onLabel:"是"},null,8,["modelValue"])]),bl,(0,t._)("td",null,[(0,t.wy)((0,t._)("input",{type:"text",disabled:1==l.useManage,"onUpdate:modelValue":e[20]||(e[20]=e=>l.manageUrl=e),placeholder:"請輸入網址"},null,8,hl),[[d.nr,l.manageUrl]])])]),(0,t._)("tr",null,[Vl,(0,t._)("td",null,[(0,t.Wm)(u,{modelValue:l.useSite,"onUpdate:modelValue":e[21]||(e[21]=e=>l.useSite=e),falseValue:"0",trueValue:"1",offLabel:"否",onLabel:"是"},null,8,["modelValue"])]),Ul,(0,t._)("td",null,[(0,t.wy)((0,t._)("input",{type:"text",disabled:1==l.useSite,"onUpdate:modelValue":e[22]||(e[22]=e=>l.siteUrl=e),placeholder:"請輸入網址"},null,8,Hl),[[d.nr,l.siteUrl]])])])]),(0,t._)("div",null,[(0,t._)("button",{class:"w-full",onClick:e[23]||(e[23]=(...e)=>l.submitAll&&l.submitAll(...e))},"儲存")])]),(0,t.wy)((0,t.Wm)(r,{onClose_modal:e[25]||(e[25]=e=>l.displayModal=0)},{title:(0,t.w5)((()=>[(0,t._)("div",kl,[1==l.displayModal?((0,t.wg)(),(0,t.iD)("div",Dl,"選擇單位")):(0,t.kq)("",!0)])])),content:(0,t.w5)((()=>[Al,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.divisionList,((a,s)=>((0,t.wg)(),(0,t.iD)("label",{key:s,class:(0,n.C_)({"division-label":!0,"division-selected":l.hostDivision.indexOf(a.division_id)>-1})},[(0,t._)("span",null,(0,n.zw)(a.name_ch),1),(0,t.wy)((0,t._)("input",{class:"hidden",type:"checkbox",value:a.division_id,"onUpdate:modelValue":e[24]||(e[24]=e=>l.hostDivision=e)},null,8,Ol),[[d.e8,l.hostDivision]])],2)))),128))])),_:1},512),[[d.F8,l.displayModal>0]])],64)}var xl=a(6617),Gl=a(6149),jl=(0,t.aZ)({setup(l,e){const a=new L.L,t=new L._,n=(0,A.iH)(0),d=(0,A.iH)([]);function s(){a.Url("sports/list").GetAll(d)}s();const i=(0,A.iH)([]);function o(){a.Url("division/list").GetAll(i)}o();const u=(0,A.iH)(""),_=(0,A.iH)(""),r=(0,A.iH)(""),m=(0,A.iH)("athl"),c=(0,A.iH)([]),p=(0,A.iH)(""),w=(0,A.iH)(""),y=(0,A.iH)(""),f=(0,A.iH)(0),g=(0,A.iH)(0),v=(0,A.iH)(1),b=(0,A.iH)(0),h=(0,A.iH)(0),V=(0,A.iH)(0),U=(0,A.iH)(0),H=(0,A.iH)(1),k=(0,A.iH)(""),D=(0,A.iH)(0),O=(0,A.iH)(""),x=(0,A.iH)(1),G=(0,A.iH)("");function j(){0===H.value&&(k.value=""),0===D.value&&(O.value=""),0===x.value&&(G.value=""),a.Dataset().AddObj("name_ch",u).AddObj("name_en",_).AddObj("info",r).AddObj("type",m).AddObj("reg_start",p).AddObj("reg_end",w).AddObj("event_start",y).AddObj("nsysu",f).AddObj("nsysu_game",g).AddObj("reg_switch",v).Add("host_division",JSON.stringify(c.value)).AddObj("reg_unit",U).AddObj("same_org",b).AddObj("same_dept",h).AddObj("only_team",V).AddObj("use_reg",H).AddObj("reg_url",k).AddObj("use_manage",D).AddObj("manage_url",O).AddObj("use_site",x).AddObj("site_url",G),new Blob([JSON.stringify(a.GetDset())]).size>1e7?t.Alert("總大小大於10Mb，無法上傳"):a.Url("games/add").Post(a.GetDset()).then((l=>{"done"===l.message&&(t.Alert("已新增比賽"),e.emit("refresh"),e.emit("close_modal"))}))}return{nameCh:u,nameEn:_,info:r,type:m,hostDivision:c,regStart:p,regEnd:w,eventStart:y,nsysu:f,nsysuGame:g,regSwitch:v,regUnit:U,sameOrg:b,sameDept:h,onlyTeam:V,useReg:H,regUrl:k,useManage:D,manageUrl:O,useSite:x,siteUrl:G,submitAll:j,sportList:d,divisionList:i,displayModal:n}},components:{Toggle:xl.Z,SmallModal:O.Z,QuillEditor:Gl.Bn}}),Sl=a(89);const Ml=(0,Sl.Z)(jl,[["render",Ll],["__scopeId","data-v-a2f6fa7e"]]);var Cl=Ml,Wl=a(2483),Yl=a(65),ql=(0,t.aZ)({setup(){const l=(0,A.iH)(0),e=new L.L,a=(new L._,(0,Wl.tv)()),t=(0,Yl.oR)(),n=(0,A.qj)([]),d=(0,A.iH)(0),s=(0,A.qj)(JSON.parse(localStorage.sep5_admin_data));function i(){e.Url("sports/list").Get().then((l=>{l.forEach((l=>{JSON.parse(l.division).includes(s.division_id)&&n.push(l.code)}))}))}i();const o=(0,A.iH)([]);function u(){e.Url("games/list").GetAll(o)}u();const _=(0,A.iH)([]);function r(){e.Url("division/list").GetAll(_).then((()=>{_.value.forEach((l=>{l.division_id===s.division_id&&(d.value=l)}))}))}function m(l,e){t.commit("setGameId",l),"athl"===e?a.push(`/athletics/${e}/${l}`):a.push(`/general/${e}/${l}`)}return r(),{displayModal:l,getGames:u,gameList:o,divisionList:_,openGame:m,userData:s,sports:n,division:d}},components:{SmallModal:O.Z,AddGame:Cl}});const El=(0,Sl.Z)(ql,[["render",D],["__scopeId","data-v-0a08f248"]]);var zl=El}}]);
//# sourceMappingURL=478.4ade3c98.js.map
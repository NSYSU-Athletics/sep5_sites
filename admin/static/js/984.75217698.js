"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[984],{8924:function(l,e,t){t.d(e,{Z:function(){return v}});var n=t(3396),a=t(9242);const i={class:"fixed z-10 left-0 top-0 w-full h-screen bg-black bg-opacity-40 p-5 box-border overflow-hidden"},s={class:"box-border w-full h-full bg-white relative p-5 sm:p-10 flex flex-col overflow-hidden rounded"},o={class:"flex items-center"},d={class:"flex-grow font-medium"},r={class:"flex-grow h-full overflow-hidden p-1"};function u(l,e,t,u,c,_){return(0,n.wg)(),(0,n.j4)(a.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n._)("div",s,[(0,n._)("div",o,[(0,n._)("div",d,[(0,n.WI)(l.$slots,"title")]),(0,n._)("div",{class:"text-4xl text-gray-300 hover:text-gray-500 cursor-pointer duration-300 font-light",onClick:e[0]||(e[0]=(...e)=>l.closeModal&&l.closeModal(...e))},"×")]),(0,n._)("div",r,[(0,n.WI)(l.$slots,"content")])])])])),_:3})}var c=(0,n.aZ)({setup(l,e){function t(){e.emit("close_modal")}return{closeModal:t}}}),_=t(89);const p=(0,_.Z)(c,[["render",u]]);var v=p},4984:function(l,e,t){t.r(e),t.d(e,{default:function(){return Ul}});t(6699);var n=t(3396),a=t(7139),i=t(9242);const s=l=>((0,n.dD)("data-v-0f1bdec2"),l=l(),(0,n.Cn)(),l),o={class:"h-full overflow-y-auto overflow-x-hidden"},d={class:"grid grid-cols-1 gap-10"},r={class:"grid grid-cols-5 gap-5 grid-box"},u={key:0,class:"p-5 bg-white shadow"},c=s((()=>(0,n._)("div",{class:"text-2xl"},"使用者帳號",-1))),_=s((()=>(0,n._)("hr",{class:"my-2"},null,-1))),p=s((()=>(0,n._)("span",null,"帳號管理",-1))),v=[p],w=s((()=>(0,n._)("span",null,"運動員管理",-1))),g=[w],f=s((()=>(0,n._)("span",null,"單位管理",-1))),y=[f],k={class:"p-5 bg-white shadow"},b=s((()=>(0,n._)("div",{class:"text-2xl"},"管理員帳號",-1))),h=s((()=>(0,n._)("hr",{class:"my-2"},null,-1))),m=s((()=>(0,n._)("span",null,"帳號管理",-1))),U=[m],M=s((()=>(0,n._)("span",null,"單位管理",-1))),x=[M],D={class:"text-2xl"},C={key:0},q={key:1},H={key:2},z={key:3},A={key:4},S=s((()=>(0,n._)("hr",{class:"my-2"},null,-1)));function L(l,e,t,s,p,w){const f=(0,n.up)("UserAccount"),m=(0,n.up)("FullModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n._)("div",d,[(0,n._)("div",r,[(0,n._)("div",null,[(0,n._)("span",null,"總帳號："+(0,a.zw)(l.factSheet.user+l.factSheet.admin),1)]),(0,n._)("div",null,[(0,n._)("span",null,"使用者："+(0,a.zw)(l.factSheet.user),1)]),(0,n._)("div",null,[(0,n._)("span",null,"待審核："+(0,a.zw)(l.factSheet.verify),1)]),(0,n._)("div",null,[(0,n._)("span",null,"運動員："+(0,a.zw)(l.factSheet.athlete),1)]),(0,n._)("div",null,[(0,n._)("span",null,"管理員："+(0,a.zw)(l.factSheet.admin),1)])]),l.adminData.permission>1?((0,n.wg)(),(0,n.iD)("div",u,[c,_,(0,n._)("button",{class:"arrow-button bg-orange-400",onClick:e[0]||(e[0]=e=>l.displayModal=1)},v),(0,n._)("button",{class:"arrow-button bg-orange-400",onClick:e[1]||(e[1]=e=>l.displayModal=2)},g),(0,n._)("button",{class:"arrow-button bg-orange-400",onClick:e[2]||(e[2]=e=>l.displayModal=3)},y)])):(0,n.kq)("",!0),(0,n._)("div",k,[b,h,l.adminData.permission>1?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"arrow-button",onClick:e[3]||(e[3]=e=>l.displayModal=4)},U)):(0,n.kq)("",!0),l.adminData.permission>1?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"arrow-button",onClick:e[4]||(e[4]=e=>l.displayModal=5)},x)):(0,n.kq)("",!0)])])]),(0,n.wy)((0,n.Wm)(m,{onClose_modal:e[6]||(e[6]=e=>l.displayModal=0)},{title:(0,n.w5)((()=>[(0,n._)("div",D,[1==l.displayModal?((0,n.wg)(),(0,n.iD)("div",C,"使用者帳號管理")):(0,n.kq)("",!0),2==l.displayModal?((0,n.wg)(),(0,n.iD)("div",q,"運動員管理")):(0,n.kq)("",!0),3==l.displayModal?((0,n.wg)(),(0,n.iD)("div",H,"使用者單位管理")):(0,n.kq)("",!0),4==l.displayModal?((0,n.wg)(),(0,n.iD)("div",z,"管理員帳號管理")):(0,n.kq)("",!0),5==l.displayModal?((0,n.wg)(),(0,n.iD)("div",A,"管理員單位管理")):(0,n.kq)("",!0)])])),content:(0,n.w5)((()=>[S,1==l.displayModal?((0,n.wg)(),(0,n.j4)(f,{key:0,onClose_modal:e[5]||(e[5]=e=>l.displayModal=0)})):(0,n.kq)("",!0)])),_:1},512),[[i.F8,l.large.includes(l.displayModal)]])],64)}var Z=t(4870),E=t(3927),Y=t(8924);const F=l=>((0,n.dD)("data-v-2fec3ae0"),l=l(),(0,n.Cn)(),l),G={class:"h-full flex flex-col pb-5"},I={class:"flex-grow overflow-auto"},O={class:"user-table"},V=F((()=>(0,n._)("tr",{class:"sticky top-0 bg-white"},[(0,n._)("th",null,"帳號"),(0,n._)("th",null,"姓名"),(0,n._)("th",null,"學校/團體"),(0,n._)("th",null,"系所"),(0,n._)("th",null,"驗證"),(0,n._)("th")],-1))),W=(0,n.Uk)("通過"),T=(0,n.Uk)("未審核"),$=["onClick"],j={class:"p-1 bg-white"},K=["innerHTML","onClick"],P={class:"text-2xl"},J={key:0},N=F((()=>(0,n._)("hr",{class:"my-2"},null,-1))),B={key:0,class:"flex"},Q={class:"basis-1/2 user-content"},R=(0,n.Uk)("姓名： "),X=["readonly"],ll=(0,n.Uk)("權限： "),el=["disabled"],tl=F((()=>(0,n._)("option",{value:"0"},"無權限",-1))),nl=F((()=>(0,n._)("option",{value:"1"},"系所管理",-1))),al=F((()=>(0,n._)("option",{value:"2"},"團體管理",-1))),il=[tl,nl,al],sl=(0,n.Uk)("審核： "),ol=["disabled"],dl=F((()=>(0,n._)("option",{value:"0"},"未審核",-1))),rl=F((()=>(0,n._)("option",{value:"1"},"已通過",-1))),ul=[dl,rl],cl=(0,n.Uk)("手機："),_l=["readonly"],pl={class:"basis-1/2"},vl=["src"];function wl(l,e,t,s,o,d){const r=(0,n.up)("SmallModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",G,[(0,n._)("div",I,[(0,n._)("table",O,[V,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.userList.data,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[(0,n._)("td",null,(0,a.zw)(e.account),1),(0,n._)("td",null,(0,a.zw)(e.name),1),(0,n._)("td",null,(0,a.zw)(e.org_ch_full),1),(0,n._)("td",null,[e.hasOwnProperty("dept_ch")?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)((0,a.zw)(e.dept_ch),1)],64)):(0,n.kq)("",!0)]),(0,n._)("td",null,[1==e.verification?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[W],64)):(0,n.kq)("",!0),0==e.verification?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[T],64)):(0,n.kq)("",!0)]),(0,n._)("td",null,[(0,n._)("button",{class:"button",onClick:t=>l.getUser(e.u_id)},"查看",8,$)])])))),128))])]),(0,n._)("div",j,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.userList.links,((e,t)=>((0,n.wg)(),(0,n.iD)("button",{key:t,class:(0,a.C_)({"move-button":!0,active:e.active}),innerHTML:e.label,onClick:t=>l.getUserList(e.url)},null,10,K)))),128))])]),(0,n.wy)((0,n.Wm)(r,{onClose_modal:e[6]||(e[6]=e=>l.displayModal=0)},{title:(0,n.w5)((()=>[(0,n._)("div",P,[1==l.displayModal?((0,n.wg)(),(0,n.iD)("div",J,"使用者資訊")):(0,n.kq)("",!0)])])),content:(0,n.w5)((()=>[N,1==l.displayModal?((0,n.wg)(),(0,n.iD)("div",B,[(0,n._)("div",Q,[(0,n._)("div",null,[R,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>l.currentUser.name=e),readonly:!l.isEdit},null,8,X),[[i.nr,l.currentUser.name]])]),(0,n._)("div",null,"單位："+(0,a.zw)(l.currentUser.org_ch_full),1),(0,n._)("div",null,"系所："+(0,a.zw)(l.currentUser.dept_ch),1),(0,n._)("div",null,[ll,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[1]||(e[1]=e=>l.currentUser.permission=e),disabled:!l.isEdit},il,8,el),[[i.bM,l.currentUser.permission]])]),(0,n._)("div",null,[sl,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[2]||(e[2]=e=>l.currentUser.verification=e),disabled:!l.isEdit},ul,8,ol),[[i.bM,l.currentUser.verification]])]),(0,n._)("div",null,[cl,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=e=>l.currentUser.phone=e),readonly:!l.isEdit},null,8,_l),[[i.nr,l.currentUser.phone]])]),(0,n._)("div",null,"登入："+(0,a.zw)(l.currentUser.last_login),1),(0,n._)("div",null,"ＩＰ："+(0,a.zw)(l.currentUser.last_ip),1),(0,n._)("div",null,[0==l.isEdit?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"button",onClick:e[4]||(e[4]=e=>l.isEdit=!0)},"編輯")):(0,n.kq)("",!0),1==l.isEdit?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"button",onClick:e[5]||(e[5]=(...e)=>l.submitAll&&l.submitAll(...e))},"儲存")):(0,n.kq)("",!0)])]),(0,n._)("div",pl,[(0,n._)("img",{src:l.currentUser.image,alt:""},null,8,vl)])])):(0,n.kq)("",!0)])),_:1},512),[[i.F8,l.displayModal>0]])],64)}var gl=t(1435),fl=(0,n.aZ)({setup(l,e){const t=new E.L,n=new E._,a=(0,Z.iH)(0),i=(0,Z.iH)([]),s=(0,Z.iH)(""),o=(0,Z.iH)({}),d=(0,Z.iH)(!1);function r(l="account/user/list"){null!==l&&(l.indexOf("account/user/list?page=")>-1&&(l=l.substring(l.indexOf("account/user/list?page="))),t.Url(l).GetAll(i),s.value=l)}function u(l){t.Url(`account/user/list/${l}`).GetAll(o).then((()=>{a.value=1}))}function c(){t.Dataset().Add("name",o.value.name).Add("permission",o.value.permission).Add("verification",o.value.verification).Add("phone",o.value.phone),t.Url("account/user/edit").Patch(o.value.u_id,t.GetDset()).then((l=>{"done"===l.message&&(n.Alert("已編輯"),a.value=0,r(s.value))}))}return r(),{displayModal:a,userList:i,getUserList:r,getUser:u,currentUser:o,isEdit:d,submitAll:c}},components:{SmallModal:gl.Z}}),yl=t(89);const kl=(0,yl.Z)(fl,[["render",wl],["__scopeId","data-v-2fec3ae0"]]);var bl=kl,hl=(0,n.aZ)({setup(){const l=new E.L,e=(0,Z.iH)(0),t=JSON.parse(localStorage.sep5_admin_data),n=(0,Z.iH)({});function a(){l.Url("reg-factsheet").GetAll(n)}return a(),{displayModal:e,large:[1,2,3,4,5],factSheet:n,adminData:t}},components:{FullModal:Y.Z,UserAccount:bl}});const ml=(0,yl.Z)(hl,[["render",L],["__scopeId","data-v-0f1bdec2"]]);var Ul=ml}}]);
//# sourceMappingURL=984.75217698.js.map
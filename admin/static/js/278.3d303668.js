"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[278],{6617:function(e,l,a){a.d(l,{Z:function(){return i}});var n=a(4870),t=a(3396),d=a(7139),u=a(9242),i={name:"Toggle",emits:["input","update:modelValue","change"],props:{value:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},modelValue:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},id:{type:[String,Number],required:!1,default:"toggle"},name:{type:[String,Number],required:!1,default:"toggle"},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},falseValue:{type:[String,Number,Boolean],required:!1,default:!1},trueValue:{type:[String,Number,Boolean],required:!1,default:!0},onLabel:{type:[String,Object],required:!1,default:""},offLabel:{type:[String,Object],required:!1,default:""},classes:{type:Object,required:!1,default:()=>({})},labelledby:{type:String,required:!1},describedby:{type:String,required:!1}},setup(e,l){const a=function(e,l,a){const{value:d,modelValue:u,falseValue:i,trueValue:o,disabled:s}=(0,n.BK)(e),r=u&&void 0!==u.value?u:d,c=(0,t.Fl)((()=>r.value===o.value)),g=e=>{l.emit("input",e),l.emit("update:modelValue",e),l.emit("change",e)},b=()=>{g(o.value)},_=()=>{g(i.value)};return-1!==[null,void 0,!1,0,"0","off"].indexOf(r.value)&&-1===[i.value,o.value].indexOf(r.value)&&_(),-1!==[!0,1,"1","on"].indexOf(r.value)&&-1===[i.value,o.value].indexOf(r.value)&&b(),{externalValue:r,checked:c,update:g,check:b,uncheck:_,handleInput:e=>{g(e.target.checked?o.value:i.value)},handleClick:()=>{s.value||(c.value?_():b())}}}(e,l),d=function(e,l,a){const{trueValue:d,falseValue:u,onLabel:i,offLabel:o}=(0,n.BK)(e),s=a.checked,r=a.update;return{label:(0,t.Fl)((()=>{let e=s.value?i.value:o.value;return e||(e="&nbsp;"),e})),toggle:()=>{r(s.value?u.value:d.value)},on:()=>{r(d.value)},off:()=>{r(u.value)}}}(e,0,{checked:a.checked,update:a.update}),u=function(e,l,a){const d=(0,n.BK)(e),u=d.disabled,i=a.checked,o=(0,t.Fl)((()=>({container:"toggle-container",toggle:"toggle",toggleOn:"toggle-on",toggleOff:"toggle-off",toggleOnDisabled:"toggle-on-disabled",toggleOffDisabled:"toggle-off-disabled",handle:"toggle-handle",handleOn:"toggle-handle-on",handleOff:"toggle-handle-off",handleOnDisabled:"toggle-handle-on-disabled",handleOffDisabled:"toggle-handle-off-disabled",label:"toggle-label",...d.classes.value})));return{classList:(0,t.Fl)((()=>({container:o.value.container,toggle:[o.value.toggle,u.value?i.value?o.value.toggleOnDisabled:o.value.toggleOffDisabled:i.value?o.value.toggleOn:o.value.toggleOff],handle:[o.value.handle,u.value?i.value?o.value.handleOnDisabled:o.value.handleOffDisabled:i.value?o.value.handleOn:o.value.handleOff],label:o.value.label})))}}(e,0,{checked:a.checked}),i=function(e,l,a){const{disabled:t}=(0,n.BK)(e),d=a.check,u=a.uncheck,i=a.checked;return{handleSpace:()=>{t.value||(i.value?u():d())}}}(e,0,{check:a.check,uncheck:a.uncheck,checked:a.checked});return{...a,...u,...d,...i}}};const o=["tabindex","aria-checked","aria-describedby","aria-labelledby"],s=["id","name","value","checked","disabled"],r=["innerHTML"],c=["checked"];i.render=function(e,l,a,n,i,g){return(0,t.wg)(),(0,t.iD)("div",{class:(0,d.C_)(e.classList.container),tabindex:a.disabled?void 0:0,"aria-checked":e.checked,"aria-describedby":a.describedby,"aria-labelledby":a.labelledby,role:"switch",onKeyup:l[1]||(l[1]=(0,u.D2)(((...l)=>e.handleSpace&&e.handleSpace(...l)),["space"]))},[(0,t.wy)((0,t._)("input",{type:"checkbox",id:a.id,name:a.name,value:a.trueValue,checked:e.checked,disabled:a.disabled},null,8,s),[[u.F8,!1]]),(0,t._)("div",{class:(0,d.C_)(e.classList.toggle),onClick:l[0]||(l[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[(0,t._)("span",{class:(0,d.C_)(e.classList.handle)},null,2),(0,t.WI)(e.$slots,"label",{checked:e.checked,classList:e.classList},(()=>[(0,t._)("span",{class:(0,d.C_)(e.classList.label),innerHTML:e.label},null,10,r)])),a.required?((0,t.wg)(),(0,t.iD)("input",{key:0,type:"checkbox",style:{appearance:"none",height:"1px",margin:"0",padding:"0",fontSize:"0",background:"transparent",position:"absolute",width:"100%",bottom:"0",outline:"none"},checked:e.checked,"aria-hidden":"true",tabindex:"-1",required:""},null,8,c)):(0,t.kq)("v-if",!0)],2)],42,o)},i.__file="src/Toggle.vue"},3687:function(e,l,a){a.d(l,{Z:function(){return _}});var n=a(3396),t=a(9242);const d={class:"fixed z-10 left-0 top-0 w-full h-screen bg-black bg-opacity-40 p-5 box-border overflow-hidden"},u={class:"box-border w-full h-full bg-white relative p-5 sm:p-10 flex flex-col overflow-hidden rounded"},i={class:"flex items-center"},o={class:"flex-grow font-medium"},s={class:"flex-grow h-full overflow-hidden"};function r(e,l,a,r,c,g){return(0,n.wg)(),(0,n.j4)(t.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n._)("div",u,[(0,n._)("div",i,[(0,n._)("div",o,[(0,n.WI)(e.$slots,"title")]),(0,n._)("div",{class:"text-4xl text-gray-300 hover:text-gray-500 cursor-pointer duration-300 font-light",onClick:l[0]||(l[0]=(...l)=>e.closeModal&&e.closeModal(...l))},"×")]),(0,n._)("div",s,[(0,n.WI)(e.$slots,"content")])])])])),_:3})}var c=(0,n.aZ)({setup(e,l){function a(){l.emit("close_modal")}return{closeModal:a}}}),g=a(89);const b=(0,g.Z)(c,[["render",r]]);var _=b},8873:function(e,l,a){a.d(l,{Z:function(){return _e}});var n=a(3396),t=a(9242),d=a(7139);const u=e=>((0,n.dD)("data-v-19c0407a"),e=e(),(0,n.Cn)(),e),i=u((()=>(0,n._)("td",{class:"w-[20%]"},"報名系統",-1))),o={class:"w-[30%]"},s=u((()=>(0,n._)("td",{class:"w-[20%]"},null,-1))),r=u((()=>(0,n._)("td",{class:"w-[30%]"},null,-1))),c=u((()=>(0,n._)("td",null,"賽事中文",-1))),g={colspan:"3"},b=["readonly"],_=u((()=>(0,n._)("td",null,"賽事英文",-1))),m={colspan:"3"},p=["readonly"],v=u((()=>(0,n._)("td",null,"賽事說明",-1))),f={colspan:"3"},h=["readonly"],y=u((()=>(0,n._)("td",null,"運動項目",-1))),w={colspan:"3"},V=["value"],k=u((()=>(0,n._)("td",null,"負責單位",-1))),O={colspan:"3"},S=["disabled"],U={key:0,class:"inline-block m-1 border-2 rounded py-1 px-2"},x=u((()=>(0,n._)("td",null,"比賽日期",-1))),L={colspan:"3"},D=["readonly"],H=u((()=>(0,n._)("td",null,"報名開始",-1))),A={colspan:"3"},j=["readonly"],E=u((()=>(0,n._)("td",null,"報名結束",-1))),q={colspan:"3"},C=["readonly"],M=u((()=>(0,n._)("td",{class:"w-[20%]"},"比賽性質",-1))),W={class:"w-[30%]"},T=u((()=>(0,n._)("td",{class:"w-[20%]"},"報名單位",-1))),Z={class:"w-[30%]"},B=u((()=>(0,n._)("td",{class:"w-[20%]"},"報名選手限同系所",-1))),K={class:"w-[30%]"},I=u((()=>(0,n._)("td",{class:"w-[20%]"},"報名選手限同團體",-1))),Y={class:"w-[30%]"},F=u((()=>(0,n._)("td",{class:"w-[20%]"},"同一單位限報一隊",-1))),N={class:"w-[30%]"},z=u((()=>(0,n._)("td",null,"使用報名系統",-1))),G=u((()=>(0,n._)("td",null,"自有報名系統",-1))),R=["disabled","readonly"],$=u((()=>(0,n._)("td",null,"使用管理系統",-1))),J=u((()=>(0,n._)("td",null,"自有管理系統",-1))),P=["disabled","readonly"],Q=u((()=>(0,n._)("td",null,"使用網站頁面",-1))),X=u((()=>(0,n._)("td",null,"自有網站頁面",-1))),ee=["disabled","readonly"],le={class:"text-2xl"},ae={key:0},ne=u((()=>(0,n._)("hr",{class:"my-2"},null,-1))),te=["value"];function de(e,l,a,u,de,ue){const ie=(0,n.up)("Toggle"),oe=(0,n.up)("SmallModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",null,[(0,n._)("table",null,[(0,n._)("tr",null,[i,(0,n._)("td",o,[(0,n.Wm)(ie,{modelValue:e.regSwitch,"onUpdate:modelValue":l[0]||(l[0]=l=>e.regSwitch=l),disabled:!e.isEdit,falseValue:"0",trueValue:"1",offLabel:"關閉",onLabel:"開啟"},null,8,["modelValue","disabled"])]),s,r]),(0,n._)("tr",null,[c,(0,n._)("td",g,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=l=>e.nameCh=l),readonly:!e.isEdit},null,8,b),[[t.nr,e.nameCh]])])]),(0,n._)("tr",null,[_,(0,n._)("td",m,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=l=>e.nameEn=l),readonly:!e.isEdit},null,8,p),[[t.nr,e.nameEn]])])]),(0,n._)("tr",null,[v,(0,n._)("td",f,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":l[3]||(l[3]=l=>e.info=l),readonly:!e.isEdit,class:"w-full",rows:"5"},null,8,h),[[t.nr,e.info]])])]),(0,n._)("tr",null,[y,(0,n._)("td",w,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":l[4]||(l[4]=l=>e.type=l),disabled:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.sportList,((e,l)=>((0,n.wg)(),(0,n.iD)("option",{key:l,value:e.code},(0,d.zw)(e.name_ch),9,V)))),128))],512),[[t.bM,e.type]])])]),(0,n._)("tr",null,[k,(0,n._)("td",O,[(0,n._)("div",null,[(0,n._)("button",{onClick:l[5]||(l[5]=l=>e.displayModal=1),disabled:!e.isEdit},"選取",8,S)]),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.divisionList,((l,a)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:a},[e.hostDivision.indexOf(l.division_id)>-1?((0,n.wg)(),(0,n.iD)("span",U,(0,d.zw)(l.name_ch),1)):(0,n.kq)("",!0)],64)))),128))])])]),(0,n._)("tr",null,[x,(0,n._)("td",L,[(0,n.wy)((0,n._)("input",{type:"date","onUpdate:modelValue":l[6]||(l[6]=l=>e.eventStart=l),readonly:!e.isEdit},null,8,D),[[t.nr,e.eventStart]])])]),(0,n._)("tr",null,[H,(0,n._)("td",A,[(0,n.wy)((0,n._)("input",{type:"datetime-local","onUpdate:modelValue":l[7]||(l[7]=l=>e.regStart=l),readonly:!e.isEdit},null,8,j),[[t.nr,e.regStart]])])]),(0,n._)("tr",null,[E,(0,n._)("td",q,[(0,n.wy)((0,n._)("input",{type:"datetime-local","onUpdate:modelValue":l[8]||(l[8]=l=>e.regEnd=l),readonly:!e.isEdit},null,8,C),[[t.nr,e.regEnd]])])]),(0,n._)("tr",null,[M,(0,n._)("td",W,[(0,n.Wm)(ie,{modelValue:e.nsysu,"onUpdate:modelValue":l[9]||(l[9]=l=>e.nsysu=l),falseValue:"0",trueValue:"1",offLabel:"校內",onLabel:"校外"},null,8,["modelValue"])]),T,(0,n._)("td",Z,[(0,n.Wm)(ie,{modelValue:e.regUnit,"onUpdate:modelValue":l[10]||(l[10]=l=>e.regUnit=l),falseValue:"0",trueValue:"1",offLabel:"團體",onLabel:"系所"},null,8,["modelValue"])])]),(0,n._)("tr",null,[1==e.regUnit?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[B,(0,n._)("td",K,[(0,n.Wm)(ie,{modelValue:e.sameDept,"onUpdate:modelValue":l[11]||(l[11]=l=>e.sameDept=l),falseValue:"0",trueValue:"1",offLabel:"不限",onLabel:"限制"},null,8,["modelValue"])])],64)):(0,n.kq)("",!0),0==e.regUnit?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[I,(0,n._)("td",Y,[(0,n.Wm)(ie,{modelValue:e.sameOrg,"onUpdate:modelValue":l[12]||(l[12]=l=>e.sameOrg=l),falseValue:"0",trueValue:"1",offLabel:"不限",onLabel:"限制"},null,8,["modelValue"])])],64)):(0,n.kq)("",!0),F,(0,n._)("td",N,[(0,n.Wm)(ie,{modelValue:e.onlyTeam,"onUpdate:modelValue":l[13]||(l[13]=l=>e.onlyTeam=l),falseValue:"0",trueValue:"1",offLabel:"不限",onLabel:"限制"},null,8,["modelValue"])])]),(0,n._)("tr",null,[z,(0,n._)("td",null,[(0,n.Wm)(ie,{modelValue:e.useReg,"onUpdate:modelValue":l[14]||(l[14]=l=>e.useReg=l),disabled:!e.isEdit,falseValue:"0",trueValue:"1",offLabel:"否",onLabel:"是"},null,8,["modelValue","disabled"])]),G,(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{type:"text",disabled:"1"===e.useReg,"onUpdate:modelValue":l[15]||(l[15]=l=>e.regUrl=l),readonly:!e.isEdit,placeholder:"請輸入網址"},null,8,R),[[t.nr,e.regUrl]])])]),(0,n._)("tr",null,[$,(0,n._)("td",null,[(0,n.Wm)(ie,{modelValue:e.useManage,"onUpdate:modelValue":l[16]||(l[16]=l=>e.useManage=l),disabled:!e.isEdit,falseValue:"0",trueValue:"1",offLabel:"否",onLabel:"是"},null,8,["modelValue","disabled"])]),J,(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{type:"text",disabled:"1"===e.useManage,"onUpdate:modelValue":l[17]||(l[17]=l=>e.manageUrl=l),readonly:!e.isEdit,placeholder:"請輸入網址"},null,8,P),[[t.nr,e.manageUrl]])])]),(0,n._)("tr",null,[Q,(0,n._)("td",null,[(0,n.Wm)(ie,{modelValue:e.useSite,"onUpdate:modelValue":l[18]||(l[18]=l=>e.useSite=l),disabled:!e.isEdit,falseValue:"0",trueValue:"1",offLabel:"否",onLabel:"是"},null,8,["modelValue","disabled"])]),X,(0,n._)("td",null,[(0,n.wy)((0,n._)("input",{type:"text",disabled:"1"===e.useSite,"onUpdate:modelValue":l[19]||(l[19]=l=>e.siteUrl=l),readonly:!e.isEdit,placeholder:"請輸入網址"},null,8,ee),[[t.nr,e.siteUrl]])])])]),(0,n._)("div",null,[0==e.isEdit?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"w-full",onClick:l[20]||(l[20]=l=>e.isEdit=!0)},"編輯")):(0,n.kq)("",!0),1==e.isEdit?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"w-full",onClick:l[21]||(l[21]=(...l)=>e.submitAll&&e.submitAll(...l))},"儲存")):(0,n.kq)("",!0)])]),(0,n.wy)((0,n.Wm)(oe,{onClose_modal:l[23]||(l[23]=l=>e.displayModal=0)},{title:(0,n.w5)((()=>[(0,n._)("div",le,[1==e.displayModal?((0,n.wg)(),(0,n.iD)("div",ae,"選擇單位")):(0,n.kq)("",!0)])])),content:(0,n.w5)((()=>[ne,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.divisionList,((a,u)=>((0,n.wg)(),(0,n.iD)("label",{key:u,class:(0,d.C_)({"division-label":!0,"division-selected":e.hostDivision.indexOf(a.division_id)>-1})},[(0,n._)("span",null,(0,d.zw)(a.name_ch),1),(0,n.wy)((0,n._)("input",{class:"hidden",type:"checkbox",value:a.division_id,"onUpdate:modelValue":l[22]||(l[22]=l=>e.hostDivision=l)},null,8,te),[[t.e8,e.hostDivision]])],2)))),128))])),_:1},512),[[t.F8,e.displayModal>0]])],64)}var ue=a(4870),ie=a(6617),oe=a(3927),se=a(1435),re=a(2483),ce=(0,n.aZ)({props:["gameType"],setup(e,l){const a=new oe.L,n=new oe._,t=(0,re.yj)(),d=(0,ue.iH)(e.gameType),u=(0,ue.iH)(0),i=(0,ue.iH)([]);function o(){a.Url("sports/list").GetAll(i)}o();const s=(0,ue.iH)([]);function r(){a.Url("division/list").GetAll(s)}r();const c=(0,ue.iH)(""),g=(0,ue.iH)(""),b=(0,ue.iH)(""),_=(0,ue.iH)("athl"),m=(0,ue.iH)([]),p=(0,ue.iH)(""),v=(0,ue.iH)(""),f=(0,ue.iH)(""),h=(0,ue.iH)("0"),y=(0,ue.iH)("1"),w=(0,ue.iH)("0"),V=(0,ue.iH)("0"),k=(0,ue.iH)("0"),O=(0,ue.iH)("0"),S=(0,ue.iH)("1"),U=(0,ue.iH)(""),x=(0,ue.iH)("1"),L=(0,ue.iH)(""),D=(0,ue.iH)("1"),H=(0,ue.iH)("");function A(){a.Url(`games/${t.params.gameId}`).Get().then((e=>{c.value=e.name_ch,g.value=e.name_en,b.value=e.info,_.value=e.type,m.value=JSON.parse(e.host_division),p.value=e.reg_start,v.value=e.reg_end,f.value=e.event_start,h.value=String(e.nsysu),y.value=String(e.reg_switch),w.value=String(e.same_org),V.value=String(e.same_dept),k.value=String(e.only_team),O.value=String(e.reg_unit),S.value=String(e.use_reg),U.value=e.reg_url,x.value=String(e.use_manage),L.value=e.manage_url,D.value=String(e.use_site),H.value=e.site_url}))}function j(){"1"===S.value&&(U.value=""),"1"===x.value&&(L.value=""),"1"===D.value&&(H.value=""),a.Dataset().AddObj("name_ch",c).AddObj("name_en",g).AddObj("info",b).AddObj("type",_).AddObj("reg_start",p).AddObj("reg_end",v).AddObj("event_start",f).AddObj("nsysu",h).AddObj("reg_switch",y).Add("host_division",JSON.stringify(m.value)).AddObj("same_org",w).AddObj("same_dept",V).AddObj("only_team",k).AddObj("reg_unit",O).AddObj("use_reg",S).AddObj("reg_url",U).AddObj("use_manage",x).AddObj("manage_url",L).AddObj("use_site",D).AddObj("site_url",H),a.Url("games/edit").Patch(String(t.params.gameId),a.GetDset()).then((e=>{"done"===e.message&&(n.Alert("已更新比賽資訊"),l.emit("refresh"),l.emit("close_modal"))}))}return A(),{nameCh:c,nameEn:g,info:b,type:_,hostDivision:m,regStart:p,regEnd:v,eventStart:f,nsysu:h,regSwitch:y,sameOrg:w,sameDept:V,onlyTeam:k,regUnit:O,useReg:S,regUrl:U,useManage:x,manageUrl:L,useSite:D,siteUrl:H,submitAll:j,sportList:i,divisionList:s,displayModal:u,gameCode:d,isEdit:(0,ue.iH)(!1)}},components:{Toggle:ie.Z,SmallModal:se.Z}}),ge=a(89);const be=(0,ge.Z)(ce,[["render",de],["__scopeId","data-v-19c0407a"]]);var _e=be}}]);
//# sourceMappingURL=278.3d303668.js.map